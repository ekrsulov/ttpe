"use strict";(self.webpackChunkttpe_docs=self.webpackChunkttpe_docs||[]).push([[1217],{8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>o});var s=i(6540);const t={},l=s.createContext(t);function r(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(l.Provider,{value:n},e.children)}},9711:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"features/mobile","title":"Mobile Features","description":"TTPE provides a comprehensive set of mobile-specific features and adaptations to ensure a smooth touch-based editing experience on smartphones and tablets.","source":"@site/docs/features/mobile.md","sourceDirName":"features","slug":"/features/mobile","permalink":"/ttpe/docs/docs/features/mobile","draft":false,"unlisted":false,"editUrl":"https://github.com/ekrsulov/ttpe/tree/main/doc/docs/features/mobile.md","tags":[],"version":"current","lastUpdatedBy":"Ernesto Krsulovic","lastUpdatedAt":1762144584000,"frontMatter":{"id":"mobile","title":"Mobile Features","sidebar_label":"Mobile"},"sidebar":"docs","previous":{"title":"Persistence","permalink":"/ttpe/docs/docs/features/persistence"},"next":{"title":"Components","permalink":"/ttpe/docs/docs/ui/components"}}');var t=i(4848),l=i(8453);const r={id:"mobile",title:"Mobile Features",sidebar_label:"Mobile"},o="Mobile Features",a={},c=[{value:"Overview",id:"overview",level:2},{value:"Touch Gestures",id:"touch-gestures",level:2},{value:"Pinch-to-Zoom",id:"pinch-to-zoom",level:3},{value:"Two-Finger Pan",id:"two-finger-pan",level:3},{value:"Virtual Shift",id:"virtual-shift",level:2},{value:"What is Virtual Shift?",id:"what-is-virtual-shift",level:3},{value:"How to Use",id:"how-to-use",level:3},{value:"Visual Indicator",id:"visual-indicator",level:3},{value:"Implementation",id:"implementation",level:3},{value:"Where Virtual Shift Works",id:"where-virtual-shift-works",level:3},{value:"Responsive Layout",id:"responsive-layout",level:2},{value:"Breakpoints",id:"breakpoints",level:3},{value:"Mobile vs Desktop Detection",id:"mobile-vs-desktop-detection",level:3},{value:"Layout Adaptations",id:"layout-adaptations",level:3},{value:"Sidebar Behavior",id:"sidebar-behavior",level:4},{value:"Action Bars",id:"action-bars",level:4},{value:"Minimap",id:"minimap",level:4},{value:"Touch-Optimized Controls",id:"touch-optimized-controls",level:2},{value:"Larger Hit Areas",id:"larger-hit-areas",level:3},{value:"Touch Event Handling",id:"touch-event-handling",level:3},{value:"Prevent Unwanted Touch Behaviors",id:"prevent-unwanted-touch-behaviors",level:3},{value:"Mobile-Specific Limitations",id:"mobile-specific-limitations",level:2},{value:"Hidden Features",id:"hidden-features",level:3},{value:"1. <strong>Keyboard Shortcuts Help</strong>",id:"1-keyboard-shortcuts-help",level:4},{value:"2. <strong>Minimap Panel</strong>",id:"2-minimap-panel",level:4},{value:"3. <strong>Sidebar Pinning</strong>",id:"3-sidebar-pinning",level:4},{value:"4. <strong>Advanced Panels</strong>",id:"4-advanced-panels",level:4},{value:"Touch-Specific Considerations",id:"touch-specific-considerations",level:3},{value:"Double-Tap Detection",id:"double-tap-detection",level:4},{value:"Gesture Conflicts",id:"gesture-conflicts",level:4},{value:"Edge Spacing and Safe Areas",id:"edge-spacing-and-safe-areas",level:2},{value:"Action Bar Positioning",id:"action-bar-positioning",level:3},{value:"Responsive Margins",id:"responsive-margins",level:3},{value:"Testing on Mobile",id:"testing-on-mobile",level:2},{value:"Browser Testing",id:"browser-testing",level:3},{value:"Responsive Testing Tools",id:"responsive-testing-tools",level:3},{value:"Key Test Cases",id:"key-test-cases",level:3},{value:"API Reference",id:"api-reference",level:2},{value:"Mobile Touch Gestures Hook",id:"mobile-touch-gestures-hook",level:3},{value:"Virtual Shift State",id:"virtual-shift-state",level:3},{value:"Breakpoint Detection",id:"breakpoint-detection",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"For Plugin Developers",id:"for-plugin-developers",level:3},{value:"For End Users",id:"for-end-users",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Pinch zoom not working",id:"pinch-zoom-not-working",level:3},{value:"Virtual Shift not responding",id:"virtual-shift-not-responding",level:3},{value:"Sidebar won&#39;t pin on mobile",id:"sidebar-wont-pin-on-mobile",level:3},{value:"Touch events feel laggy",id:"touch-events-feel-laggy",level:3},{value:"Action bars overlap content",id:"action-bars-overlap-content",level:3},{value:"Future Enhancements",id:"future-enhancements",level:2},{value:"Related Documentation",id:"related-documentation",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"mobile-features",children:"Mobile Features"})}),"\n",(0,t.jsx)(n.p,{children:"TTPE provides a comprehensive set of mobile-specific features and adaptations to ensure a smooth touch-based editing experience on smartphones and tablets."}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"The application automatically detects mobile devices and adapts its interface and behavior accordingly. Key mobile features include:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Touch Gestures"}),": Pinch-to-zoom and two-finger pan"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Virtual Shift"}),": Touch-friendly modifier key simulation"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Responsive Layout"}),": Adaptive UI optimized for smaller screens"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Touch-Optimized Controls"}),": Larger hit areas and touch-friendly interactions"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"touch-gestures",children:"Touch Gestures"}),"\n",(0,t.jsx)(n.h3,{id:"pinch-to-zoom",children:"Pinch-to-Zoom"}),"\n",(0,t.jsx)(n.p,{children:"Use two fingers to zoom in and out of the canvas."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"How it works:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Place two fingers on the canvas"}),"\n",(0,t.jsx)(n.li,{children:"Spread fingers apart to zoom in"}),"\n",(0,t.jsx)(n.li,{children:"Pinch fingers together to zoom out"}),"\n",(0,t.jsx)(n.li,{children:"The zoom center is calculated at the midpoint between your fingers"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Implementation Details:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Minimum zoom: 0.1\xd7 (10%)"}),"\n",(0,t.jsx)(n.li,{children:"Maximum zoom: 100\xd7 (10000%)"}),"\n",(0,t.jsx)(n.li,{children:"Smooth interpolation between zoom levels"}),"\n",(0,t.jsx)(n.li,{children:"Real-time viewport updates during gesture"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Touch gesture implementation\nimport { useMobileTouchGestures } from '../canvas/hooks/useMobileTouchGestures';\n\n// In your component\nuseMobileTouchGestures(svgRef);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"two-finger-pan",children:"Two-Finger Pan"}),"\n",(0,t.jsx)(n.p,{children:"Pan across the canvas using two fingers."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"How it works:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Place two fingers on the canvas"}),"\n",(0,t.jsx)(n.li,{children:"Move both fingers in the same direction to pan"}),"\n",(0,t.jsx)(n.li,{children:"Pan continues smoothly as you drag"}),"\n",(0,t.jsx)(n.li,{children:"Automatically calculates midpoint between fingers"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Features:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Smooth panning with precision formatting"}),"\n",(0,t.jsx)(n.li,{children:"Prevents default touch behavior during gestures"}),"\n",(0,t.jsx)(n.li,{children:"Works simultaneously with pinch-to-zoom"}),"\n",(0,t.jsx)(n.li,{children:"Preserves single-tap and double-tap interactions"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"virtual-shift",children:"Virtual Shift"}),"\n",(0,t.jsx)(n.p,{children:"Virtual Shift mode provides a touch-friendly alternative to holding the physical Shift key on mobile devices."}),"\n",(0,t.jsx)(n.h3,{id:"what-is-virtual-shift",children:"What is Virtual Shift?"}),"\n",(0,t.jsx)(n.p,{children:"Virtual Shift is a toggle button that simulates holding the Shift key modifier. When active, it affects all interactions that normally require Shift:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Multi-selection"}),": Add/remove elements from selection"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Constrained transformations"}),": Maintain aspect ratios"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Path operations"}),": Extend selections in edit mode"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"how-to-use",children:"How to Use"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Enable Virtual Shift"}),": Tap the Virtual Shift button in the toolbar"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Perform actions"}),": All actions behave as if Shift is held"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Disable Virtual Shift"}),": Tap the button again to toggle off"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"visual-indicator",children:"Visual Indicator"}),"\n",(0,t.jsx)(n.p,{children:"When Virtual Shift is active:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"The button appears highlighted/pressed"}),"\n",(0,t.jsx)(n.li,{children:"All Shift-dependent operations work without touching the screen"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"implementation",children:"Implementation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Store state\ninterface BaseState {\n  isVirtualShiftActive: boolean;\n  setVirtualShift: (active: boolean) => void;\n  toggleVirtualShift: () => void;\n}\n\n// Effective shift calculation\nimport { getEffectiveShift } from '../utils/effectiveShift';\n\nconst effectiveShiftKey = getEffectiveShift(\n  event.shiftKey,           // Physical Shift key\n  isVirtualShiftActive      // Virtual Shift state\n);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"where-virtual-shift-works",children:"Where Virtual Shift Works"}),"\n",(0,t.jsx)(n.p,{children:"Virtual Shift affects behavior in:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Select Plugin"}),": Multi-selection with tap"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Edit Plugin"}),": Multiple point selection"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Subpath Plugin"}),": Subpath multi-selection"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Transformation Plugin"}),": Constrained scaling/rotation"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Canvas Events"}),": General pointer interactions"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"responsive-layout",children:"Responsive Layout"}),"\n",(0,t.jsx)(n.p,{children:"The application adapts its layout based on screen size using Chakra UI breakpoints."}),"\n",(0,t.jsx)(n.h3,{id:"breakpoints",children:"Breakpoints"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"breakpoints: {\n  base: '0em',    // 0px - Mobile portrait\n  sm: '30em',     // ~480px - Mobile landscape\n  md: '48em',     // ~768px - Tablet/Desktop\n  lg: '64em',     // ~1024px - Desktop\n  xl: '80em',     // ~1280px - Large desktop\n  '2xl': '96em'   // ~1536px - Extra large\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"mobile-vs-desktop-detection",children:"Mobile vs Desktop Detection"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Component-level detection\nconst isDesktop = useBreakpointValue(\n  { base: false, md: true },\n  { ssr: false }\n);\n\nconst isMobile = useBreakpointValue(\n  { base: true, md: false },\n  { fallback: 'md' }\n);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"layout-adaptations",children:"Layout Adaptations"}),"\n",(0,t.jsx)(n.h4,{id:"sidebar-behavior",children:"Sidebar Behavior"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Desktop (md and up):"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Pinned by default"}),"\n",(0,t.jsx)(n.li,{children:"Resizable width (drag handle)"}),"\n",(0,t.jsx)(n.li,{children:"Can be unpinned to overlay mode"}),"\n",(0,t.jsx)(n.li,{children:"Persists state across sessions"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Mobile (base to sm):"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Never pinned (always overlay mode)"}),"\n",(0,t.jsx)(n.li,{children:"Full-height drawer"}),"\n",(0,t.jsx)(n.li,{children:"Swipe to close"}),"\n",(0,t.jsx)(n.li,{children:"Hamburger menu to open"}),"\n",(0,t.jsx)(n.li,{children:"Pin button is hidden"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Desktop: pinned by default, Mobile: never pinned\nconst [isPinned, setIsPinned] = useState(isDesktop ?? true);\n\n// Sync isPinned with desktop/mobile changes\nuseEffect(() => {\n  if (!isDesktop) {\n    // Mobile: always unpinned\n    setIsPinned(false);\n  }\n}, [isDesktop]);\n"})}),"\n",(0,t.jsx)(n.h4,{id:"action-bars",children:"Action Bars"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Top Action Bar:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Shows hamburger menu button when sidebar is not pinned"}),"\n",(0,t.jsx)(n.li,{children:"Full-width on mobile"}),"\n",(0,t.jsx)(n.li,{children:"Floating with responsive padding"}),"\n",(0,t.jsx)(n.li,{children:"Adapts spacing based on sidebar state"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Bottom Action Bar:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Floating toolbar at bottom of screen"}),"\n",(0,t.jsx)(n.li,{children:"Responsive spacing from screen edges"}),"\n",(0,t.jsx)(n.li,{children:"Adapts to sidebar width when pinned"}),"\n",(0,t.jsx)(n.li,{children:"Touch-optimized button sizes"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Action bar positioning\n<FloatingToolbarShell\n  toolbarPosition=\"bottom\"\n  sidebarWidth={sidebarWidth}\n  sx={{\n    transition: 'left 0.3s ease-in-out',\n  }}\n/>\n"})}),"\n",(0,t.jsx)(n.h4,{id:"minimap",children:"Minimap"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Desktop:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Always visible (when enabled in settings)"}),"\n",(0,t.jsx)(n.li,{children:"Fixed position at bottom-right"}),"\n",(0,t.jsx)(n.li,{children:"Overlays canvas"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Mobile:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Hidden by default"})," to save screen space"]}),"\n",(0,t.jsx)(n.li,{children:"Can be enabled in settings, but not recommended"}),"\n",(0,t.jsxs)(n.li,{children:["Uses CSS ",(0,t.jsx)(n.code,{children:"display: { base: 'none', md: 'block' }"})]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"// Minimap visibility\n<Box\n  display={{ base: 'none', md: 'block' }}\n  position=\"fixed\"\n  bottom={`${MINIMAP_MARGIN}px`}\n  right={`${sidebarWidth + MINIMAP_MARGIN}px`}\n>\n  {/* Minimap content */}\n</Box>\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"touch-optimized-controls",children:"Touch-Optimized Controls"}),"\n",(0,t.jsx)(n.h3,{id:"larger-hit-areas",children:"Larger Hit Areas"}),"\n",(0,t.jsx)(n.p,{children:"Interactive elements on mobile have larger hit areas for better touch accuracy."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Edit Points:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Calculate larger hit area for better touch/mouse interaction\nconst POINT_RADIUS = 4;        // Visual radius\nconst HIT_AREA_RADIUS = 12;    // Touch hit radius (3x larger)\n\n// Point detection\nconst distance = Math.sqrt(dx * dx + dy * dy);\nif (distance <= HIT_AREA_RADIUS) {\n  // Point is touched\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Toolbar Buttons:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Minimum touch target: 44px \xd7 44px (iOS guidelines)"}),"\n",(0,t.jsx)(n.li,{children:"Adequate spacing between buttons"}),"\n",(0,t.jsx)(n.li,{children:"Visual feedback on press"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"touch-event-handling",children:"Touch Event Handling"}),"\n",(0,t.jsx)(n.p,{children:"The application uses pointer events for unified mouse and touch support:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Unified pointer events\nonPointerDown={handlePointerDown}\nonPointerMove={handlePointerMove}\nonPointerUp={handlePointerUp}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Benefits:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Consistent behavior across input types"}),"\n",(0,t.jsx)(n.li,{children:"Automatic pointer capture"}),"\n",(0,t.jsx)(n.li,{children:"Better performance than separate mouse/touch handlers"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"prevent-unwanted-touch-behaviors",children:"Prevent Unwanted Touch Behaviors"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-css",children:"/* Prevent tap highlight on mobile (index.css) */\n* {\n  -webkit-tap-highlight-color: transparent;\n  tap-highlight-color: transparent;\n}\n\n/* Prevent text selection during drag */\nuser-select: none;\n-webkit-user-select: none;\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"mobile-specific-limitations",children:"Mobile-Specific Limitations"}),"\n",(0,t.jsx)(n.h3,{id:"hidden-features",children:"Hidden Features"}),"\n",(0,t.jsx)(n.p,{children:"Some features are hidden or disabled on mobile to optimize the experience:"}),"\n",(0,t.jsxs)(n.h4,{id:"1-keyboard-shortcuts-help",children:["1. ",(0,t.jsx)(n.strong,{children:"Keyboard Shortcuts Help"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Keyboard shortcuts are not shown in help documentation on mobile"}),"\n",(0,t.jsx)(n.li,{children:"Virtual Shift replaces Shift key modifier"}),"\n",(0,t.jsx)(n.li,{children:"Most shortcuts are unavailable without physical keyboard"}),"\n"]}),"\n",(0,t.jsxs)(n.h4,{id:"2-minimap-panel",children:["2. ",(0,t.jsx)(n.strong,{children:"Minimap Panel"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Hidden by default on screens smaller than 768px"}),"\n",(0,t.jsx)(n.li,{children:"Can be enabled but not recommended due to limited screen space"}),"\n",(0,t.jsx)(n.li,{children:"Uses valuable canvas area"}),"\n"]}),"\n",(0,t.jsxs)(n.h4,{id:"3-sidebar-pinning",children:["3. ",(0,t.jsx)(n.strong,{children:"Sidebar Pinning"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Pin/unpin toggle is hidden on mobile"}),"\n",(0,t.jsx)(n.li,{children:"Sidebar always operates in overlay mode"}),"\n",(0,t.jsx)(n.li,{children:"Cannot be permanently docked"}),"\n"]}),"\n",(0,t.jsxs)(n.h4,{id:"4-advanced-panels",children:["4. ",(0,t.jsx)(n.strong,{children:"Advanced Panels"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Some complex panels show simplified versions"}),"\n",(0,t.jsx)(n.li,{children:"Curve editing panels may hide advanced controls"}),"\n",(0,t.jsxs)(n.li,{children:["Examples:","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const isMobile = useBreakpointValue({ base: true, md: false });\n\n// Conditionally render complex UI\n{hasPoints && !isMobile && (\n  <AdvancedControls />\n)}\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"touch-specific-considerations",children:"Touch-Specific Considerations"}),"\n",(0,t.jsx)(n.h4,{id:"double-tap-detection",children:"Double-Tap Detection"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Some interactions use double-tap instead of double-click"}),"\n",(0,t.jsx)(n.li,{children:"300ms threshold for double-tap detection"}),"\n",(0,t.jsx)(n.li,{children:"Used in minimap for zoom-to-element"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"gesture-conflicts",children:"Gesture Conflicts"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Multi-touch gestures (pinch, two-finger pan) take precedence"}),"\n",(0,t.jsx)(n.li,{children:"Single-touch events only fire when gesture is not active"}),"\n",(0,t.jsx)(n.li,{children:"Prevents interference with tap/click events"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Prevent default only for active gestures\nconst handleTouchEnd = (event: TouchEvent) => {\n  const wasGestureActive = gestureStateRef.current.isGestureActive;\n  \n  if (wasGestureActive) {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n  // Otherwise, allow tap events to work normally\n};\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"edge-spacing-and-safe-areas",children:"Edge Spacing and Safe Areas"}),"\n",(0,t.jsx)(n.h3,{id:"action-bar-positioning",children:"Action Bar Positioning"}),"\n",(0,t.jsx)(n.p,{children:"Action bars respect safe areas and maintain adequate spacing from screen edges:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// FloatingToolbarShell spacing\nconst MOBILE_EDGE_SPACING = '8px';   // Minimum spacing from edges\nconst DESKTOP_EDGE_SPACING = '16px'; // More spacing on desktop\n\n// Bottom position accounts for iOS safe area\nbottom={`calc(${MOBILE_EDGE_SPACING} + env(safe-area-inset-bottom))`}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"responsive-margins",children:"Responsive Margins"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Theme spacing configuration\nexport const spacing = {\n  toolbar: {\n    base: '8px',   // Mobile\n    md: '12px',    // Tablet\n    lg: '16px',    // Desktop\n  },\n  actionBar: {\n    horizontal: { base: '8px', md: '16px' },\n    vertical: { base: '8px', md: '12px' },\n  },\n};\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"testing-on-mobile",children:"Testing on Mobile"}),"\n",(0,t.jsx)(n.h3,{id:"browser-testing",children:"Browser Testing"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"iOS Safari:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Primary testing target"}),"\n",(0,t.jsx)(n.li,{children:"Test gestures, viewport, and safe areas"}),"\n",(0,t.jsx)(n.li,{children:"Verify touch event handling"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Android Chrome:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Secondary testing target"}),"\n",(0,t.jsx)(n.li,{children:"Test pinch-to-zoom behavior"}),"\n",(0,t.jsx)(n.li,{children:"Verify tap highlight removal"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"responsive-testing-tools",children:"Responsive Testing Tools"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Chrome DevTools:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Open DevTools (F12)"}),"\n",(0,t.jsx)(n.li,{children:"Toggle device toolbar (Ctrl+Shift+M)"}),"\n",(0,t.jsx)(n.li,{children:"Select device preset or custom dimensions"}),"\n",(0,t.jsx)(n.li,{children:"Test touch events (Enable touch simulation)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Safari Web Inspector:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Enable Develop menu in Safari preferences"}),"\n",(0,t.jsx)(n.li,{children:'Select "Enter Responsive Design Mode"'}),"\n",(0,t.jsx)(n.li,{children:"Choose device or custom viewport"}),"\n",(0,t.jsx)(n.li,{children:"Test on actual iOS devices via USB debugging"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"key-test-cases",children:"Key Test Cases"}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Two-finger pinch zoom works smoothly"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Two-finger pan doesn't conflict with pinch"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Single tap works for selection"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Double-tap doesn't trigger zoom (prevented)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Virtual Shift toggles correctly"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Sidebar opens/closes with menu button"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Action bars don't overlap content"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Minimap is hidden on mobile"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","No tap highlights appear"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Safe area insets are respected"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,t.jsx)(n.h3,{id:"mobile-touch-gestures-hook",children:"Mobile Touch Gestures Hook"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { useMobileTouchGestures } from '../canvas/hooks/useMobileTouchGestures';\n\ninterface TouchInfo {\n  id: number;\n  x: number;\n  y: number;\n}\n\ninterface GestureState {\n  touches: TouchInfo[];\n  initialDistance: number | null;\n  initialZoom: number;\n  initialPanX: number;\n  initialPanY: number;\n  initialMidpoint: { x: number; y: number } | null;\n  isGestureActive: boolean;\n}\n\n// Usage\nconst svgRef = useRef<SVGSVGElement>(null);\nuseMobileTouchGestures(svgRef);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"virtual-shift-state",children:"Virtual Shift State"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Store methods\nconst isVirtualShiftActive = useCanvasStore(state => state.isVirtualShiftActive);\nconst setVirtualShift = useCanvasStore(state => state.setVirtualShift);\nconst toggleVirtualShift = useCanvasStore(state => state.toggleVirtualShift);\n\n// Utility function\nimport { getEffectiveShift } from '../utils/effectiveShift';\n\nfunction getEffectiveShift(\n  physicalShiftKey: boolean,\n  isVirtualShiftActive: boolean\n): boolean {\n  return physicalShiftKey || isVirtualShiftActive;\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"breakpoint-detection",children:"Breakpoint Detection"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { useBreakpointValue } from '@chakra-ui/react';\n\n// Returns true on desktop, false on mobile\nconst isDesktop = useBreakpointValue(\n  { base: false, md: true },\n  { ssr: false }\n);\n\n// Returns true on mobile, false on desktop\nconst isMobile = useBreakpointValue(\n  { base: true, md: false },\n  { fallback: 'md' }\n);\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(n.h3,{id:"for-plugin-developers",children:"For Plugin Developers"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Always check for mobile context:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const isMobile = useBreakpointValue({ base: true, md: false });\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Use effective shift instead of raw shift:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const effectiveShift = getEffectiveShift(\n  event.shiftKey,\n  isVirtualShiftActive\n);\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Provide touch-optimized hit areas:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const hitRadius = isMobile ? 16 : 8;\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Hide complex UI on mobile:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"{!isMobile && <AdvancedPanel />}\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Use pointer events instead of mouse/touch:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"onPointerDown={handler}  // \u2705 Good\nonMouseDown={handler}    // \u274c Avoid\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"for-end-users",children:"For End Users"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Enable Virtual Shift"})," when you need multi-select or constrained transforms"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Use two-finger gestures"})," for zoom and pan - they're more precise"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Rotate your device"})," to landscape for more workspace"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Close the sidebar"})," when editing to maximize canvas space"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Disable minimap"})," in settings to reclaim screen space"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(n.h3,{id:"pinch-zoom-not-working",children:"Pinch zoom not working"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Ensure you're using two fingers"}),"\n",(0,t.jsx)(n.li,{children:"Check that you're touching the canvas, not UI elements"}),"\n",(0,t.jsx)(n.li,{children:"Try refreshing the page"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"virtual-shift-not-responding",children:"Virtual Shift not responding"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Check that the button shows active state when tapped"}),"\n",(0,t.jsx)(n.li,{children:"Try toggling it off and on again"}),"\n",(0,t.jsxs)(n.li,{children:["Verify in the store: ",(0,t.jsx)(n.code,{children:"isVirtualShiftActive"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"sidebar-wont-pin-on-mobile",children:"Sidebar won't pin on mobile"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"This is expected behavior - sidebar cannot be pinned on mobile devices"}),"\n",(0,t.jsx)(n.li,{children:"Use the hamburger menu to open/close the sidebar"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"touch-events-feel-laggy",children:"Touch events feel laggy"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Check device performance (older devices may struggle)"}),"\n",(0,t.jsx)(n.li,{children:"Close other browser tabs to free memory"}),"\n",(0,t.jsx)(n.li,{children:"Disable minimap and complex overlays"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"action-bars-overlap-content",children:"Action bars overlap content"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Report as a bug - this shouldn't happen"}),"\n",(0,t.jsx)(n.li,{children:"Check for custom CSS that might interfere"}),"\n",(0,t.jsx)(n.li,{children:"Verify safe area insets are applied"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"future-enhancements",children:"Future Enhancements"}),"\n",(0,t.jsx)(n.p,{children:"Potential mobile improvements being considered:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Haptic feedback"})," for important interactions"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Gesture customization"})," (e.g., three-finger undo)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Stylus support"})," with pressure sensitivity"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Offline mode"})," with service workers"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Native app wrapper"})," for app store distribution"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Better landscape layout"})," optimization"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Swipe gestures"})," for sidebar and undo/redo"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/ttpe/docs/docs/architecture/overview",children:"Architecture Overview"})," - System design"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"../api/canvas-store",children:"Canvas Store API"})," - State management"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/ttpe/docs/docs/ui/components",children:"UI Components"})," - UI system"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);