"use strict";(self.webpackChunkttpe_docs=self.webpackChunkttpe_docs||[]).push([[3733],{5125:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>c,default:()=>h,frontMatter:()=>a,metadata:()=>l,toc:()=>o});const l=JSON.parse('{"id":"plugins/catalog/select","title":"Select Plugin","description":"Purpose: Selection tool for picking, moving, and manipulating elements","source":"@site/docs/plugins/catalog/select.md","sourceDirName":"plugins/catalog","slug":"/plugins/catalog/select","permalink":"/ttpe/docs/docs/plugins/catalog/select","draft":false,"unlisted":false,"editUrl":"https://github.com/ekrsulov/ttpe/tree/main/doc/docs/plugins/catalog/select.md","tags":[],"version":"current","lastUpdatedBy":"Ernesto Krsulovic","lastUpdatedAt":1762144584000,"frontMatter":{"id":"select","title":"Select Plugin","sidebar_label":"Select"},"sidebar":"docs","previous":{"title":"Configuration","permalink":"/ttpe/docs/docs/plugins/configuration"},"next":{"title":"Pencil","permalink":"/ttpe/docs/docs/plugins/catalog/pencil"}}');var s=t(4848),i=t(8453);const a={id:"select",title:"Select Plugin",sidebar_label:"Select"},c="Select Plugin",r={},o=[{value:"Overview",id:"overview",level:2},{value:"Plugin Interaction Flow",id:"plugin-interaction-flow",level:2},{value:"State Management",id:"state-management",level:2},{value:"Handler",id:"handler",level:2},{value:"Keyboard Shortcuts",id:"keyboard-shortcuts",level:2},{value:"Canvas Layers",id:"canvas-layers",level:2},{value:"Public APIs",id:"public-apis",level:2},{value:"Usage Examples",id:"usage-examples",level:2},{value:"Activating the Select Tool",id:"activating-the-select-tool",level:3},{value:"Working with Selection",id:"working-with-selection",level:3},{value:"Implementation Details",id:"implementation-details",level:2},{value:"Edge Cases &amp; Limitations",id:"edge-cases--limitations",level:2},{value:"Related",id:"related",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"select-plugin",children:"Select Plugin"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Purpose"}),": Selection tool for picking, moving, and manipulating elements"]}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"Selection functionality in TTPE includes:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Single and multi-select with Shift-click to add/remove"}),"\n",(0,s.jsx)(n.li,{children:"Rectangle selection (drag on empty area)"}),"\n",(0,s.jsx)(n.li,{children:"Moving selected elements"}),"\n",(0,s.jsx)(n.li,{children:"Deleting selected elements"}),"\n",(0,s.jsx)(n.li,{children:"Grouping and ungrouping"}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Alignment, distribution, and ordering"})," (bring to front, send to back) are provided by the ",(0,s.jsx)(n.code,{children:"useArrangeHandlers"})," hook and displayed in the ",(0,s.jsx)(n.strong,{children:"ArrangePanel"})," in the sidebar footer when elements are selected. These features are not part of the select plugin itself."]})}),"\n",(0,s.jsx)(n.h2,{id:"plugin-interaction-flow",children:"Plugin Interaction Flow"}),"\n",(0,s.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant User\n    participant UI as UI/Toolbar\n    participant Store as Canvas Store\n    participant Handler as Plugin Handler\n    participant Canvas as Canvas Renderer\n    \n    Note over User,Canvas: 1. Tool Activation\n    User->>UI: Click Select Tool\n    UI->>Store: setActivePlugin('select')\n    Store->>Store: Update activePlugin\n    Store->>Canvas: Re-render with select cursor\n    \n    Note over User,Canvas: 2. Element Selection\n    User->>Canvas: Click on element\n    Canvas->>Handler: handler(event, point, target)\n    Handler->>Store: Check event.shiftKey\n    \n    alt Click on empty SVG canvas\n        Handler->>Store: clearSelection() if no Shift\n        Handler->>Handler: beginSelectionRectangle(point)\n    else Click on element\n        Handler->>Store: selectElement(id, shiftKey)\n    end\n    \n    Store->>Store: Update selectedIds\n    Store->>Canvas: Re-render selection overlays\n    \n    Note over User,Canvas: 3. Rectangle Selection\n    User->>Canvas: Drag on empty area\n    Canvas->>Handler: Internal drag tracking\n    Handler->>Canvas: Render selection rectangle\n    \n    User->>Canvas: Release pointer\n    Handler->>Store: selectElements(idsInBounds)\n    Store->>Canvas: Re-render selection overlays\n    \n    Note over User,Canvas: 4. Element Deletion\n    User->>Canvas: Press Delete key\n    Canvas->>Handler: keyboardShortcuts.Delete()\n    Handler->>Store: deleteSelectedElements()\n    Store->>Store: Remove elements & clear selection\n    Store->>Canvas: Re-render canvas"}),"\n",(0,s.jsx)(n.h2,{id:"state-management",children:"State Management"}),"\n",(0,s.jsxs)(n.p,{children:["The select plugin ",(0,s.jsx)(n.strong,{children:"does not have its own slice"}),". Selection state is managed in the global ",(0,s.jsx)(n.code,{children:"SelectionSlice"}),":"]}),"\n",(0,s.jsx)(n.mermaid,{value:'graph TB\n    subgraph "SelectionSlice (Global Store)"\n        State[Selection State]\n        State --\x3e SI["selectedIds: array of strings"]\n    end\n    \n    subgraph "SelectionSlice Methods"\n        Methods[Store Actions]\n        Methods --\x3e SE[selectElement]\n        Methods --\x3e SES[selectElements]\n        Methods --\x3e CS[clearSelection]\n        Methods --\x3e GE[getSelectedElements]\n        Methods --\x3e MSE[moveSelectedElements]\n    end\n    \n    subgraph "Select Plugin"\n        Plugin[selectPlugin]\n        Plugin --\x3e H[handler: pointer events]\n        Plugin --\x3e KS[keyboardShortcuts: Delete]\n        Plugin --\x3e CL[canvasLayers: 4 overlays]\n    end\n    \n    Plugin --\x3e Methods\n    Methods --\x3e State'}),"\n",(0,s.jsx)(n.h2,{id:"handler",children:"Handler"}),"\n",(0,s.jsx)(n.p,{children:"The plugin handler responds to pointer events on the canvas:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"handler: (event, point, target, context) => {\n  // When clicking on empty SVG canvas\n  if (target.tagName === 'svg') {\n    // Clear selection unless Shift is held\n    if (!event.shiftKey) {\n      const state = context.store.getState();\n      state.clearSelection?.();\n    }\n    // Begin rectangle selection\n    context.helpers.beginSelectionRectangle?.(point);\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"keyboard-shortcuts",children:"Keyboard Shortcuts"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Delete"}),": Delete selected elements (removes from canvas and clears selection)"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"canvas-layers",children:"Canvas Layers"}),"\n",(0,s.jsxs)(n.p,{children:["The select plugin renders ",(0,s.jsx)(n.strong,{children:"4 canvas layers"}),":"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"selection-overlays"})," (midground): Selection overlays for individual path elements showing control points"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"group-selection-bounds"})," (midground): Dashed rectangles around selected groups"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"selection-rectangle"})," (midground): Live rectangle during drag-to-select"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"selection-blocking-overlay"})," (midground): Blocks interactions during rectangle selection"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"public-apis",children:"Public APIs"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsxs)(n.strong,{children:["The select plugin does not expose a ",(0,s.jsx)(n.code,{children:"createApi"})]}),". Selection is managed through the global ",(0,s.jsx)(n.code,{children:"SelectionSlice"})," in the Canvas Store."]}),"\n",(0,s.jsxs)(n.admonition,{type:"note",children:[(0,s.jsx)(n.p,{children:"Selection functionality is part of the core Canvas Store (SelectionSlice), not a plugin API. Use the store methods directly:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const state = useCanvasStore.getState();\nstate.selectElement(elementId);\nstate.selectElements([id1, id2]);\nstate.clearSelection();\nstate.getSelectedElements();\nstate.moveSelectedElements(deltaX, deltaY);\n"})}),(0,s.jsxs)(n.p,{children:["See the ",(0,s.jsx)(n.a,{href:"../../api/canvas-store",children:"Canvas Store API"})," for more details."]})]}),"\n",(0,s.jsx)(n.h2,{id:"usage-examples",children:"Usage Examples"}),"\n",(0,s.jsx)(n.h3,{id:"activating-the-select-tool",children:"Activating the Select Tool"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const state = useCanvasStore.getState();\nstate.setActivePlugin('select');\n"})}),"\n",(0,s.jsx)(n.h3,{id:"working-with-selection",children:"Working with Selection"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Access selection state\nconst selectedIds = useCanvasStore(state => state.selectedIds);\n\n// Select an element\nconst state = useCanvasStore.getState();\nstate.selectElement(elementId, false); // false = replace selection\n\n// Multi-select\nstate.selectElement(elementId2, true); // true = add to selection\n\n// Select multiple elements\nstate.selectElements([id1, id2, id3]);\n\n// Clear selection\nstate.clearSelection();\n\n// Get selected elements\nconst selected = state.getSelectedElements();\n\n// Move selected elements\nstate.moveSelectedElements(10, 20); // deltaX, deltaY\n"})}),"\n",(0,s.jsx)(n.h2,{id:"implementation-details",children:"Implementation Details"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Location"}),": ",(0,s.jsx)(n.code,{children:"src/plugins/index.tsx"})," (embedded in main plugin file)"]}),"\n",(0,s.jsxs)(n.p,{children:["The select plugin is defined inline within the ",(0,s.jsx)(n.code,{children:"CORE_PLUGINS"})," array and does not have a separate directory."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Related State"}),": ",(0,s.jsx)(n.code,{children:"src/store/slices/features/selectionSlice.ts"})]}),"\n",(0,s.jsx)(n.h2,{id:"edge-cases--limitations",children:"Edge Cases & Limitations"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"No dedicated plugin slice"}),": Selection state lives in the global ",(0,s.jsx)(n.code,{children:"SelectionSlice"}),", not a plugin-specific slice"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"No lifecycle hooks"}),": The plugin doesn't have ",(0,s.jsx)(n.code,{children:"activate()"})," or ",(0,s.jsx)(n.code,{children:"deactivate()"})," methods"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Hidden/locked elements"}),": Elements marked as hidden or locked cannot be selected (checked in ",(0,s.jsx)(n.code,{children:"selectElement"})," and ",(0,s.jsx)(n.code,{children:"selectElements"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Subpath clearing"}),": When switching selection to a different path in select mode, any selected subpaths are automatically cleared"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Rectangle selection"}),": Only works when clicking on the empty SVG canvas (not on elements)"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"related",children:"Related"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"../overview",children:"Plugin System Overview"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"../../api/canvas-store",children:"Canvas Store API"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"../../architecture/overview",children:"Architecture Overview"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>c});var l=t(6540);const s={},i=l.createContext(s);function a(e){const n=l.useContext(i);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),l.createElement(i.Provider,{value:n},e.children)}}}]);