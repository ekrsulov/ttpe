"use strict";(self.webpackChunkttpe_docs=self.webpackChunkttpe_docs||[]).push([[6045],{1805:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>s,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"architecture/diagrams","title":"Architecture Diagrams","description":"This page provides comprehensive Mermaid diagrams visualizing TTPE\'s architecture, data flows, and subsystem interactions.","source":"@site/docs/architecture/diagrams.md","sourceDirName":"architecture","slug":"/architecture/diagrams","permalink":"/ttpe/docs/architecture/diagrams","draft":false,"unlisted":false,"editUrl":"https://github.com/ekrsulov/ttpe/tree/main/doc/docs/architecture/diagrams.md","tags":[],"version":"current","lastUpdatedBy":"Ernesto Krsulovic","lastUpdatedAt":1762144179000,"frontMatter":{"id":"diagrams","title":"Architecture Diagrams","sidebar_label":"Diagrams"},"sidebar":"docs","previous":{"title":"Overview","permalink":"/ttpe/docs/architecture/overview"},"next":{"title":"Overview","permalink":"/ttpe/docs/plugins/overview"}}');var i=t(4848),a=t(8453);const s={id:"diagrams",title:"Architecture Diagrams",sidebar_label:"Diagrams"},l="Architecture Diagrams",o={},c=[{value:"System Context Diagram",id:"system-context-diagram",level:2},{value:"Container Diagram",id:"container-diagram",level:2},{value:"Component Interaction Diagram",id:"component-interaction-diagram",level:2},{value:"Plugin Registration Sequence",id:"plugin-registration-sequence",level:2},{value:"Event Bus Data Flow",id:"event-bus-data-flow",level:2},{value:"Plugin Handler Execution Flow",id:"plugin-handler-execution-flow",level:2},{value:"Canvas Service Lifecycle",id:"canvas-service-lifecycle",level:2},{value:"Plugin Lifecycle State Machine",id:"plugin-lifecycle-state-machine",level:2},{value:"Store Slice Composition",id:"store-slice-composition",level:2},{value:"Request Processing Flow",id:"request-processing-flow",level:2},{value:"Undo/Redo Flow",id:"undoredo-flow",level:2},{value:"Persistence Flow",id:"persistence-flow",level:2},{value:"Canvas Layer Rendering",id:"canvas-layer-rendering",level:2},{value:"Plugin API Exposure Pattern",id:"plugin-api-exposure-pattern",level:2},{value:"Cross-Plugin Communication",id:"cross-plugin-communication",level:2},{value:"Summary",id:"summary",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"architecture-diagrams",children:"Architecture Diagrams"})}),"\n",(0,i.jsx)(n.p,{children:"This page provides comprehensive Mermaid diagrams visualizing TTPE's architecture, data flows, and subsystem interactions."}),"\n",(0,i.jsx)(n.h2,{id:"system-context-diagram",children:"System Context Diagram"}),"\n",(0,i.jsx)(n.mermaid,{value:'graph TB\n    subgraph "External Actors"\n        User[\ud83d\udc64 Designer/Artist]\n        Browser[\ud83c\udf10 Web Browser]\n    end\n    \n    subgraph "TTPE Application"\n        App[TTPE Editor]\n    end\n    \n    subgraph "External Systems"\n        LocalStorage[(Local Storage)]\n        WASM[WASM Modules<br/>potrace, opentype]\n        Clipboard[System Clipboard]\n    end\n    \n    User --\x3e|Interacts| App\n    App --\x3e|Runs in| Browser\n    App <--\x3e|Persist/Load| LocalStorage\n    App --\x3e|Text-to-Curves| WASM\n    App <--\x3e|Copy/Paste| Clipboard\n    \n    style App fill:#007bff,color:#fff\n    style User fill:#28a745,color:#fff'}),"\n",(0,i.jsx)(n.h2,{id:"container-diagram",children:"Container Diagram"}),"\n",(0,i.jsx)(n.mermaid,{value:'graph TB\n    subgraph "Presentation Layer"\n        Canvas[Canvas Component<br/>SVG Rendering]\n        Sidebar[Sidebar<br/>Tool Panels]\n        Toolbar[Action Bars<br/>Global Actions]\n        Overlays[Overlays<br/>Selection, Guides]\n    end\n    \n    subgraph "Core Systems"\n        PluginMgr[Plugin Manager<br/>Registry & Lifecycle]\n        EventBus[Event Bus<br/>Pub/Sub]\n        Store[Zustand Store<br/>State Management]\n        Controller[Canvas Controller<br/>Pan, Zoom, Transform]\n    end\n    \n    subgraph "Plugin Ecosystem"\n        Select[Select Plugin]\n        Pencil[Pencil Plugin]\n        Text[Text Plugin]\n        Shape[Shape Plugin]\n        Transform[Transform Plugin]\n        Edit[Edit Plugin]\n        Subpath[Subpath Plugin]\n        Curves[Curves Plugin]\n        Grid[Grid Plugin]\n        Minimap[Minimap Plugin]\n        More[...]\n    end\n    \n    subgraph "Canvas Services"\n        Zoom[Zoom Service]\n        SmoothBrush[Smooth Brush Service]\n        AddPoint[Add Point Service]\n    end\n    \n    Canvas --\x3e EventBus\n    EventBus --\x3e PluginMgr\n    PluginMgr --\x3e Store\n    \n    Select --\x3e Store\n    Pencil --\x3e Store\n    Text --\x3e Store\n    Shape --\x3e Store\n    Transform --\x3e Store\n    Edit --\x3e Store\n    Subpath --\x3e Store\n    Curves --\x3e Store\n    Grid --\x3e Store\n    \n    PluginMgr -.registers.-> Select\n    PluginMgr -.registers.-> Pencil\n    PluginMgr -.registers.-> Text\n    PluginMgr -.registers.-> Shape\n    PluginMgr -.registers.-> Transform\n    PluginMgr -.registers.-> Edit\n    PluginMgr -.registers.-> Subpath\n    PluginMgr -.registers.-> Curves\n    PluginMgr -.registers.-> Grid\n    PluginMgr -.registers.-> Minimap\n    PluginMgr -.registers.-> More\n    \n    PluginMgr --\x3e Zoom\n    PluginMgr --\x3e SmoothBrush\n    PluginMgr --\x3e AddPoint\n    \n    Sidebar -.queries.-> PluginMgr\n    Overlays -.queries.-> PluginMgr\n    \n    Controller --\x3e Store\n    Store --\x3e Canvas\n    Store --\x3e Sidebar\n    Store --\x3e Overlays\n    \n    style PluginMgr fill:#007bff,color:#fff\n    style EventBus fill:#17a2b8,color:#fff\n    style Store fill:#28a745,color:#fff'}),"\n",(0,i.jsx)(n.h2,{id:"component-interaction-diagram",children:"Component Interaction Diagram"}),"\n",(0,i.jsx)(n.mermaid,{value:'graph LR\n    subgraph "UI Components"\n        App[App.tsx]\n        Canvas[Canvas.tsx]\n        Sidebar[Sidebar.tsx]\n    end\n    \n    subgraph "State Management"\n        Store[useCanvasStore]\n        BaseSlice[Base Slice]\n        ViewportSlice[Viewport Slice]\n        SelectionSlice[Selection Slice]\n        PluginSlices[Plugin Slices]\n    end\n    \n    subgraph "Plugin System"\n        PM[PluginManager]\n        Registry[Plugin Registry]\n        APIs[Plugin APIs Map]\n    end\n    \n    App --\x3e Canvas\n    App --\x3e Sidebar\n    Canvas --\x3e Store\n    Sidebar --\x3e Store\n    \n    Store --\x3e BaseSlice\n    Store --\x3e ViewportSlice\n    Store --\x3e SelectionSlice\n    Store --\x3e PluginSlices\n    \n    PM --\x3e Registry\n    PM --\x3e APIs\n    \n    Canvas -.emits events.-> PM\n    Sidebar -.queries panels.-> PM\n    \n    PluginSlices -.registered by.-> PM\n    \n    style Store fill:#28a745,color:#fff\n    style PM fill:#007bff,color:#fff'}),"\n",(0,i.jsx)(n.h2,{id:"plugin-registration-sequence",children:"Plugin Registration Sequence"}),"\n",(0,i.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant Main as main.tsx\n    participant PM as PluginManager\n    participant Store as Zustand Store\n    participant EB as Event Bus\n    participant SR as Shortcut Registry\n    participant Plugin as Plugin Definition\n    \n    Main->>PM: pluginManager.register(plugin)\n    PM->>PM: Validate plugin ID unique\n    PM->>PM: Store in registry Map\n    \n    alt Has slices?\n        PM->>Store: registerPluginSlices(pluginId, slices)\n        Store->>Store: Execute slice factories\n        Store->>Store: Merge state into store\n        Store--\x3e>PM: Slices registered\n    end\n    \n    alt Has createApi?\n        PM->>PM: api = plugin.createApi(context)\n        PM->>PM: pluginApis.set(pluginId, api)\n    end\n    \n    alt Has keyboardShortcuts?\n        PM->>SR: canvasShortcutRegistry.register(shortcuts)\n        SR--\x3e>PM: Unsubscribe function\n        PM->>PM: Store unsubscribe in shortcutSubscriptions\n    end\n    \n    alt Has handler?\n        PM->>EB: eventBus.subscribe('pointerdown', handler)\n        EB--\x3e>PM: Unsubscribe function\n        PM->>PM: Store in interactionSubscriptions\n    end\n    \n    alt Has canvasLayers?\n        PM->>PM: setCanvasLayers(pluginId, layers)\n    end\n    \n    PM--\x3e>Main: Plugin registered"}),"\n",(0,i.jsx)(n.h2,{id:"event-bus-data-flow",children:"Event Bus Data Flow"}),"\n",(0,i.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant User\n    participant Canvas\n    participant EB as Event Bus\n    participant PM as PluginManager\n    participant Plugin as Active Plugin\n    participant Store as Zustand Store\n    participant UI as React UI\n    \n    User->>Canvas: Pointer down on canvas\n    Canvas->>Canvas: Calculate SVG point from clientX/Y\n    Canvas->>EB: emit('pointerdown', payload)\n    \n    Note over EB: payload = {<br/>event, point, target,<br/>activePlugin, helpers, state<br/>}\n    \n    EB->>PM: Notify subscribed plugins\n    PM->>PM: Filter by activePlugin match\n    PM->>Plugin: Execute handler(event, point, target, context)\n    \n    Note over Plugin: context = {<br/>store, api, helpers<br/>}\n    \n    Plugin->>Store: set({ newState })\n    Store->>Store: Update internal state\n    Store->>UI: Trigger subscribed components\n    UI->>Canvas: Re-render with new state\n    Canvas->>User: Visual feedback"}),"\n",(0,i.jsx)(n.h2,{id:"plugin-handler-execution-flow",children:"Plugin Handler Execution Flow"}),"\n",(0,i.jsx)(n.mermaid,{value:"flowchart TD\n    Start([User Interaction]) --\x3e Emit[Canvas emits event]\n    Emit --\x3e EB{Event Bus}\n    EB --\x3e CheckSub{Has subscribers?}\n    CheckSub --\x3e|No| End([End])\n    CheckSub --\x3e|Yes| Notify[Notify all subscribers]\n    \n    Notify --\x3e PM[Plugin Manager receives event]\n    PM --\x3e CheckActive{Active plugin<br/>matches?}\n    CheckActive --\x3e|No| End\n    CheckActive --\x3e|Yes| GetPlugin[Get plugin from registry]\n    \n    GetPlugin --\x3e HasHandler{Has handler?}\n    HasHandler --\x3e|No| End\n    HasHandler --\x3e|Yes| BuildContext[Build context with<br/>store, api, helpers]\n    \n    BuildContext --\x3e Execute[Execute plugin.handler]\n    Execute --\x3e UpdateStore[Plugin updates store]\n    UpdateStore --\x3e Render[UI re-renders]\n    Render --\x3e End\n    \n    style Start fill:#28a745,color:#fff\n    style End fill:#dc3545,color:#fff\n    style Execute fill:#007bff,color:#fff"}),"\n",(0,i.jsx)(n.h2,{id:"canvas-service-lifecycle",children:"Canvas Service Lifecycle"}),"\n",(0,i.jsx)(n.mermaid,{value:"stateDiagram-v2\n    [*] --\x3e Registered: registerCanvasService(service)\n    Registered --\x3e Activated: activateCanvasService(serviceId, context)\n    \n    Activated --\x3e Running: service.create(context)\n    Running --\x3e Updated: updateCanvasServiceState(serviceId, state)\n    Updated --\x3e Running\n    \n    Running --\x3e Deactivated: deactivateCanvasService(serviceId)\n    Deactivated --\x3e Unregistered: unregisterCanvasService(serviceId)\n    Unregistered --\x3e [*]\n    \n    Running --\x3e Disposed: instance.dispose()\n    Disposed --\x3e Deactivated\n    \n    note right of Registered\n        Service definition stored\n        Not yet active\n    end note\n    \n    note right of Running\n        Service instance alive\n        Listening to events\n        Can be updated\n    end note"}),"\n",(0,i.jsx)(n.h2,{id:"plugin-lifecycle-state-machine",children:"Plugin Lifecycle State Machine"}),"\n",(0,i.jsx)(n.mermaid,{value:"stateDiagram-v2\n    [*] --\x3e Unregistered\n    Unregistered --\x3e Registered: pluginManager.register(plugin)\n    \n    state Registered {\n        [*] --\x3e SlicesApplied: Has slices\n        [*] --\x3e APIInitialized: Has createApi\n        [*] --\x3e ShortcutsBound: Has shortcuts\n        [*] --\x3e HandlerBound: Has handler\n        [*] --\x3e LayersRegistered: Has canvasLayers\n    }\n    \n    Registered --\x3e Active: Plugin becomes active tool\n    Active --\x3e Inactive: Different tool selected\n    Inactive --\x3e Active: Plugin re-selected\n    \n    Active --\x3e Unregistered: pluginManager.unregister(pluginId)\n    Inactive --\x3e Unregistered: pluginManager.unregister(pluginId)\n    Unregistered --\x3e [*]\n    \n    note right of Active\n        Handler receives events\n        Panels visible in sidebar\n        Overlays rendered\n    end note"}),"\n",(0,i.jsx)(n.h2,{id:"store-slice-composition",children:"Store Slice Composition"}),"\n",(0,i.jsx)(n.mermaid,{value:'graph TB\n    subgraph "Zustand Store"\n        Root[CanvasStore Root]\n    end\n    \n    subgraph "Core Slices"\n        Base[Base Slice<br/>elements, activePlugin]\n        Viewport[Viewport Slice<br/>pan, zoom]\n        Selection[Selection Slice<br/>selectedIds, helpers]\n    end\n    \n    subgraph "Plugin Slices (Dynamic)"\n        PencilSlice[Pencil Slice<br/>strokeColor, points]\n        TextSlice[Text Slice<br/>font, size, style]\n        ShapeSlice[Shape Slice<br/>shapeType, preview]\n        TransformSlice[Transform Slice<br/>handles, rulers]\n        EditSlice[Edit Slice<br/>selectedPoints, smoothBrush]\n        SubpathSlice[Subpath Slice<br/>selectedSubpaths]\n        MoreSlices[...]\n    end\n    \n    Root --\x3e Base\n    Root --\x3e Viewport\n    Root --\x3e Selection\n    \n    Root -.registers dynamically.-> PencilSlice\n    Root -.registers dynamically.-> TextSlice\n    Root -.registers dynamically.-> ShapeSlice\n    Root -.registers dynamically.-> TransformSlice\n    Root -.registers dynamically.-> EditSlice\n    Root -.registers dynamically.-> SubpathSlice\n    Root -.registers dynamically.-> MoreSlices\n    \n    style Root fill:#28a745,color:#fff\n    style Base fill:#17a2b8,color:#fff\n    style Viewport fill:#17a2b8,color:#fff\n    style Selection fill:#17a2b8,color:#fff'}),"\n",(0,i.jsx)(n.h2,{id:"request-processing-flow",children:"Request Processing Flow"}),"\n",(0,i.jsx)(n.mermaid,{value:"flowchart TD\n    Start([User Action]) --\x3e EventType{Event Type}\n    \n    EventType --\x3e|Pointer| PointerPath[Pointer Event Path]\n    EventType --\x3e|Keyboard| KeyboardPath[Keyboard Event Path]\n    EventType --\x3e|Wheel| WheelPath[Wheel Event Path]\n    \n    PointerPath --\x3e EmitPointer[Emit to Event Bus]\n    KeyboardPath --\x3e EmitKeyboard[Emit keyboard event]\n    WheelPath --\x3e EmitWheel[Emit wheel event]\n    \n    EmitPointer --\x3e Filter{Filter by<br/>active plugin}\n    EmitKeyboard --\x3e ShortcutReg[Shortcut Registry]\n    EmitWheel --\x3e ZoomService[Zoom Service]\n    \n    Filter --\x3e|Match| ExecuteHandler[Execute plugin handler]\n    Filter --\x3e|No match| End([End])\n    \n    ExecuteHandler --\x3e CheckHelpers{Use helpers?}\n    CheckHelpers --\x3e|beginSelectionRectangle| SelectRect[Start selection rectangle]\n    CheckHelpers --\x3e|startShapeCreation| ShapePreview[Start shape preview]\n    CheckHelpers --\x3e|Direct store update| StoreUpdate[Update Zustand store]\n    \n    SelectRect --\x3e StoreUpdate\n    ShapePreview --\x3e StoreUpdate\n    \n    StoreUpdate --\x3e Persist[Debounced persist]\n    StoreUpdate --\x3e UndoSnapshot[Cooldown undo snapshot]\n    StoreUpdate --\x3e Render[React re-render]\n    \n    ShortcutReg --\x3e MatchShortcut{Shortcut<br/>matches?}\n    MatchShortcut --\x3e|Yes| ExecuteShortcut[Execute shortcut handler]\n    MatchShortcut --\x3e|No| End\n    ExecuteShortcut --\x3e StoreUpdate\n    \n    ZoomService --\x3e UpdateViewport[Update viewport slice]\n    UpdateViewport --\x3e Render\n    \n    Render --\x3e End\n    \n    style Start fill:#28a745,color:#fff\n    style End fill:#dc3545,color:#fff\n    style StoreUpdate fill:#007bff,color:#fff"}),"\n",(0,i.jsx)(n.h2,{id:"undoredo-flow",children:"Undo/Redo Flow"}),"\n",(0,i.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant User\n    participant UI\n    participant Store\n    participant Zundo as Zundo Middleware\n    participant History as History Stack\n    \n    User->>UI: Perform action (e.g., move element)\n    UI->>Store: set({ elements: newElements })\n    Store->>Zundo: State changed\n    \n    Zundo->>Zundo: Check cooldown (100ms)\n    alt Cooldown expired\n        Zundo->>History: Push snapshot to past[]\n        Zundo->>History: Clear future[]\n    else Within cooldown\n        Zundo->>Zundo: Skip snapshot\n    end\n    \n    User->>UI: Press Ctrl+Z (Undo)\n    UI->>Zundo: temporal.undo()\n    Zundo->>History: Pop from past[]\n    Zundo->>History: Push current to future[]\n    Zundo->>Store: Restore previous state\n    Store->>UI: Re-render with old state\n    \n    User->>UI: Press Ctrl+Shift+Z (Redo)\n    UI->>Zundo: temporal.redo()\n    Zundo->>History: Pop from future[]\n    Zundo->>History: Push current to past[]\n    Zundo->>Store: Restore next state\n    Store->>UI: Re-render with restored state"}),"\n",(0,i.jsx)(n.h2,{id:"persistence-flow",children:"Persistence Flow"}),"\n",(0,i.jsx)(n.mermaid,{value:"flowchart TD\n    Start([State Update]) --\x3e Check{Persistence<br/>enabled?}\n    Check --\x3e|No| End([End])\n    Check --\x3e|Yes| Serialize[Serialize state]\n    \n    Serialize --\x3e Partialize[Apply partialize filter]\n    Partialize --\x3e JSON[JSON.stringify]\n    JSON --\x3e LocalStorage[Write to localStorage]\n    \n    LocalStorage --\x3e Success{Success?}\n    Success --\x3e|Yes| End\n    Success --\x3e|No| Error[Log error]\n    Error --\x3e End\n    \n    Start2([App Load]) --\x3e CheckLS{localStorage<br/>has data?}\n    CheckLS --\x3e|No| Defaults[Use default state]\n    CheckLS --\x3e|Yes| Read[Read from localStorage]\n    \n    Read --\x3e Parse[JSON.parse]\n    Parse --\x3e Validate{Valid structure?}\n    Validate --\x3e|Yes| Migrate[Run migrations]\n    Validate --\x3e|No| Defaults\n    \n    Migrate --\x3e Restore[Restore to store]\n    Defaults --\x3e Restore\n    Restore --\x3e End2([App Ready])\n    \n    style Start fill:#28a745,color:#fff\n    style Start2 fill:#28a745,color:#fff\n    style End fill:#dc3545,color:#fff\n    style End2 fill:#dc3545,color:#fff"}),"\n",(0,i.jsx)(n.h2,{id:"canvas-layer-rendering",children:"Canvas Layer Rendering"}),"\n",(0,i.jsx)(n.mermaid,{value:'graph TB\n    subgraph "Canvas SVG"\n        SVGRoot[<svg> Root Element]\n    end\n    \n    subgraph "Background Layers"\n        Grid[Grid Plugin Layer]\n        Guides[Guidelines Plugin Layer]\n    end\n    \n    subgraph "Midground Layers (Elements)"\n        Elements[Main Elements Group<br/>paths, groups, text]\n        SelectionOverlay[Selection Plugin Layer<br/>bounding boxes, handles]\n        SubpathOverlay[Subpath Plugin Layer<br/>subpath highlights]\n    end\n    \n    subgraph "Foreground Layers"\n        EditOverlay[Edit Plugin Layer<br/>control points, handles]\n        ShapePreview[Shape Plugin Layer<br/>preview during creation]\n        TransformHandles[Transform Plugin Layer<br/>resize handles]\n        CurvesOverlay[Curves Plugin Layer<br/>lattice visualization]\n    end\n    \n    SVGRoot --\x3e Grid\n    SVGRoot --\x3e Guides\n    Grid --\x3e Elements\n    Guides --\x3e Elements\n    \n    Elements --\x3e SelectionOverlay\n    Elements --\x3e SubpathOverlay\n    SelectionOverlay --\x3e EditOverlay\n    SubpathOverlay --\x3e EditOverlay\n    \n    EditOverlay --\x3e ShapePreview\n    EditOverlay --\x3e TransformHandles\n    EditOverlay --\x3e CurvesOverlay\n    \n    style SVGRoot fill:#007bff,color:#fff\n    style Elements fill:#28a745,color:#fff'}),"\n",(0,i.jsx)(n.h2,{id:"plugin-api-exposure-pattern",children:"Plugin API Exposure Pattern"}),"\n",(0,i.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant PluginA as Plugin A\n    participant PM as Plugin Manager\n    participant PluginB as Plugin B (consumer)\n    \n    Note over PluginA: Define createApi\n    PluginA->>PM: register({ createApi: factory })\n    PM->>PM: Execute factory(context)\n    PM->>PM: Store API in pluginApis Map\n    \n    Note over PluginB: Wants to call Plugin A's API\n    PluginB->>PM: getPluginApi('pluginA')\n    PM->>PM: Lookup in pluginApis Map\n    PM--\x3e>PluginB: Return API object\n    \n    PluginB->>PluginA: api.someMethod(args)\n    PluginA->>PluginA: Execute method logic\n    PluginA--\x3e>PluginB: Return result\n    \n    alt Alternative: Direct call via PM\n        PluginB->>PM: callPluginApi('pluginA', 'someMethod', args)\n        PM->>PluginA: Proxy call to API method\n        PluginA--\x3e>PM: Return result\n        PM--\x3e>PluginB: Return result\n    end"}),"\n",(0,i.jsx)(n.h2,{id:"cross-plugin-communication",children:"Cross-Plugin Communication"}),"\n",(0,i.jsx)(n.mermaid,{value:'graph LR\n    subgraph "Plugin A"\n        A_Handler[Handler]\n        A_API[Public API]\n    end\n    \n    subgraph "Plugin Manager"\n        Registry[Plugin Registry]\n        APIs[API Map]\n        EventBus[Event Bus]\n    end\n    \n    subgraph "Plugin B"\n        B_Handler[Handler]\n        B_Consumer[API Consumer]\n    end\n    \n    subgraph "Zustand Store"\n        SharedState[Shared State]\n    end\n    \n    A_Handler --\x3e|Updates| SharedState\n    B_Handler --\x3e|Reads| SharedState\n    \n    A_API --\x3e|Registered in| APIs\n    B_Consumer --\x3e|Calls via| APIs\n    \n    A_Handler -.Subscribes.-> EventBus\n    B_Handler -.Emits.-> EventBus\n    \n    style Registry fill:#007bff,color:#fff\n    style SharedState fill:#28a745,color:#fff\n    style EventBus fill:#17a2b8,color:#fff'}),"\n",(0,i.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(n.p,{children:"These diagrams illustrate:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"System Context"}),": TTPE's external dependencies"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Containers"}),": Major architectural components"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Components"}),": Internal module structure"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Sequences"}),": Time-ordered interactions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"State Machines"}),": Plugin and service lifecycles"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Flows"}),": Data movement through the system"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Layers"}),": Canvas rendering stack"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Patterns"}),": Communication between plugins"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"../plugins/overview",children:"Plugin System Overview"})}),": How to build plugins"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"../event-bus/overview",children:"Event Bus"})}),": Event payload schemas"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"../api/create-api",children:"Public API"})}),": Using the ",(0,i.jsx)(n.code,{children:"createApi"})," pattern"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"../api/canvas-store",children:"Canvas Store"})}),": State management reference"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>l});var r=t(6540);const i={},a=r.createContext(i);function s(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);