"use strict";(self.webpackChunkttpe_docs=self.webpackChunkttpe_docs||[]).push([[3379],{3401:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"features/distribution","title":"Distribution","description":"The distribution system provides tools to evenly space multiple elements along the horizontal or vertical axis. Unlike alignment (which adjusts element positions to common edges), distribution ensures equal spacing between elements while maintaining their relative order and dimensions.","source":"@site/docs/features/distribution.md","sourceDirName":"features","slug":"/features/distribution","permalink":"/ttpe/docs/docs/features/distribution","draft":false,"unlisted":false,"editUrl":"https://github.com/ekrsulov/ttpe/tree/main/doc/docs/features/distribution.md","tags":[],"version":"current","lastUpdatedBy":"Ernesto Krsulovic","lastUpdatedAt":1762144584000,"frontMatter":{"id":"distribution","title":"Distribution","sidebar_label":"Distribution"},"sidebar":"docs","previous":{"title":"Alignment","permalink":"/ttpe/docs/docs/features/alignment"},"next":{"title":"Groups","permalink":"/ttpe/docs/docs/features/groups"}}');var s=n(4848),l=n(8453);const r={id:"distribution",title:"Distribution",sidebar_label:"Distribution"},o="Distribution",a={},d=[{value:"Overview",id:"overview",level:2},{value:"Distribution Flow",id:"distribution-flow",level:2},{value:"Distribution Operations",id:"distribution-operations",level:2},{value:"Horizontal Distribution",id:"horizontal-distribution",level:3},{value:"Vertical Distribution",id:"vertical-distribution",level:3},{value:"API Reference",id:"api-reference",level:2},{value:"Element Distribution",id:"element-distribution",level:3},{value:"Edit Mode Command Distribution",id:"edit-mode-command-distribution",level:3},{value:"Subpath Distribution",id:"subpath-distribution",level:3},{value:"Usage Examples",id:"usage-examples",level:2},{value:"Basic Element Distribution",id:"basic-element-distribution",level:3},{value:"Edit Mode Point Distribution",id:"edit-mode-point-distribution",level:3},{value:"Combining Alignment and Distribution",id:"combining-alignment-and-distribution",level:3},{value:"UI Integration",id:"ui-integration",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"For Users",id:"for-users",level:3},{value:"For Plugin Developers",id:"for-plugin-developers",level:3},{value:"Common Use Cases",id:"common-use-cases",level:2},{value:"Create Evenly-Spaced Navigation",id:"create-evenly-spaced-navigation",level:3},{value:"Organize Form Fields Vertically",id:"organize-form-fields-vertically",level:3},{value:"Create Button Grid",id:"create-button-grid",level:3},{value:"Related Documentation",id:"related-documentation",level:2}];function c(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"distribution",children:"Distribution"})}),"\n",(0,s.jsx)(t.p,{children:"The distribution system provides tools to evenly space multiple elements along the horizontal or vertical axis. Unlike alignment (which adjusts element positions to common edges), distribution ensures equal spacing between elements while maintaining their relative order and dimensions."}),"\n",(0,s.jsx)(t.p,{children:"Distribution is essential for creating balanced layouts, organizing UI elements consistently, and maintaining visual rhythm across your canvas. The system supports distribution for elements, edit mode commands (points), and subpaths with intelligent spacing calculations that account for element sizes."}),"\n",(0,s.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(t.p,{children:["Distribution requires ",(0,s.jsx)(t.strong,{children:"at least 3 elements"})," to perform meaningful spacing calculations. The system identifies the outermost elements along the chosen axis and redistributes the middle elements to create equal gaps between them."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Key characteristics:"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Maintains order"}),": Elements keep their relative position along the axis"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Preserves size"}),": Element dimensions remain unchanged"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Equal spacing"}),": Gaps between adjacent elements become uniform"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Non-destructive"}),": Original shapes are unaffected, only positions change"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Works across modes"}),": Available for elements, edit mode points, and subpaths"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"distribution-flow",children:"Distribution Flow"}),"\n",(0,s.jsx)(t.mermaid,{value:"flowchart TD\n    Start([User Action]) --\x3e Check{3+ elements<br/>selected?}\n    Check --\x3e|No| Error[Show error/<br/>disable button]\n    Check --\x3e|Yes| Collect[Collect element bounds]\n    \n    Collect --\x3e Measure[Measure total span<br/>and element sizes]\n    Measure --\x3e Calculate[Calculate available space<br/>and spacing interval]\n    \n    Calculate --\x3e Sort{Horizontal or<br/>Vertical?}\n    Sort --\x3e|Horizontal| SortX[Sort by centerX<br/>left to right]\n    Sort --\x3e|Vertical| SortY[Sort by centerY<br/>top to bottom]\n    \n    SortX --\x3e Position[Position each element<br/>with equal gaps]\n    SortY --\x3e Position\n    \n    Position --\x3e Update[Update element positions<br/>in store]\n    Update --\x3e Undo[Push to undo stack]\n    Undo --\x3e End([Elements distributed])\n    \n    Error --\x3e End"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Flow explanation:"})}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Selection validation"}),": System checks that at least 3 elements are selected"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Bounds collection"}),": Measures each element's position and size using ",(0,s.jsx)(t.code,{children:"measurePath"})]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Span calculation"}),": Identifies leftmost/rightmost (or topmost/bottommost) edges"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Spacing calculation"}),": Computes available space after subtracting element sizes"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Element positioning"}),": Places each element with uniform gaps between neighbors"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"State update"}),": Updates positions atomically and adds to undo history"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"distribution-operations",children:"Distribution Operations"}),"\n",(0,s.jsx)(t.h3,{id:"horizontal-distribution",children:"Horizontal Distribution"}),"\n",(0,s.jsxs)(t.p,{children:["Distributes elements evenly along the ",(0,s.jsx)(t.strong,{children:"X-axis"})," (left to right), creating equal horizontal gaps between adjacent elements."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Algorithm:"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"totalWidth = rightmost element's maxX - leftmost element's minX\ntotalElementsWidth = sum of all element widths\navailableSpace = totalWidth - totalElementsWidth\nspaceBetween = availableSpace / (elementCount - 1)\n\nfor each element (sorted by centerX):\n  newX = previousElement.maxX + spaceBetween\n"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Use cases:"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Toolbar buttons with consistent spacing"}),"\n",(0,s.jsx)(t.li,{children:"Navigation menu items"}),"\n",(0,s.jsx)(t.li,{children:"Column layouts"}),"\n",(0,s.jsx)(t.li,{children:"Icon grids"}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"vertical-distribution",children:"Vertical Distribution"}),"\n",(0,s.jsxs)(t.p,{children:["Distributes elements evenly along the ",(0,s.jsx)(t.strong,{children:"Y-axis"})," (top to bottom), creating equal vertical gaps between adjacent elements."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Algorithm:"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"totalHeight = bottommost element's maxY - topmost element's minY\ntotalElementsHeight = sum of all element heights\navailableSpace = totalHeight - totalElementsHeight\nspaceBetween = availableSpace / (elementCount - 1)\n\nfor each element (sorted by centerY):\n  newY = previousElement.maxY + spaceBetween\n"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Use cases:"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Vertical navigation"}),"\n",(0,s.jsx)(t.li,{children:"Form fields"}),"\n",(0,s.jsx)(t.li,{children:"Stacked panels"}),"\n",(0,s.jsx)(t.li,{children:"List items"}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"api-reference",children:"API Reference"}),"\n",(0,s.jsx)(t.h3,{id:"element-distribution",children:"Element Distribution"}),"\n",(0,s.jsxs)(t.p,{children:["Available in ",(0,s.jsx)(t.strong,{children:"Select"})," mode for distributing entire elements:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:"const state = useCanvasStore.getState();\n\n// Distribute selected elements horizontally (X-axis)\nstate.distributeHorizontally();\n\n// Distribute selected elements vertically (Y-axis)\nstate.distributeVertically();\n"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Requirements:"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"At least 3 elements must be selected"}),"\n",(0,s.jsx)(t.li,{children:"Works on root-level elements (not children within groups)"}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"edit-mode-command-distribution",children:"Edit Mode Command Distribution"}),"\n",(0,s.jsxs)(t.p,{children:["Available in ",(0,s.jsx)(t.strong,{children:"Edit"})," mode for distributing selected points/commands along path:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:"const state = useCanvasStore.getState();\n\n// Distribute selected commands horizontally\nstate.distributeHorizontallyCommands();\n\n// Distribute selected commands vertically\nstate.distributeVerticallyCommands();\n"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Requirements:"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"At least 3 commands/points must be selected"}),"\n",(0,s.jsx)(t.li,{children:"Distributes only the selected points within the path"}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"subpath-distribution",children:"Subpath Distribution"}),"\n",(0,s.jsxs)(t.p,{children:["Available in ",(0,s.jsx)(t.strong,{children:"Subpath"})," mode for distributing selected subpaths:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:"const state = useCanvasStore.getState();\n\n// Distribute selected subpaths horizontally\nstate.distributeHorizontallySubpaths();\n\n// Distribute selected subpaths vertically\nstate.distributeVerticallySubpaths();\n"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Requirements:"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"At least 3 subpaths must be selected"}),"\n",(0,s.jsx)(t.li,{children:"Subpaths can belong to the same or different parent elements"}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"usage-examples",children:"Usage Examples"}),"\n",(0,s.jsx)(t.h3,{id:"basic-element-distribution",children:"Basic Element Distribution"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:"// Select 5 elements programmatically\nstate.selectElement('element-1');\nstate.addToSelection('element-2');\nstate.addToSelection('element-3');\nstate.addToSelection('element-4');\nstate.addToSelection('element-5');\n\n// Distribute horizontally with equal spacing\nstate.distributeHorizontally();\n"})}),"\n",(0,s.jsx)(t.h3,{id:"edit-mode-point-distribution",children:"Edit Mode Point Distribution"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:"// In edit mode with selected points\nconst state = useCanvasStore.getState();\n\n// Ensure you have 3+ selected commands\nif (state.selectedCommands && state.selectedCommands.length >= 3) {\n  state.distributeVerticallyCommands();\n}\n"})}),"\n",(0,s.jsx)(t.h3,{id:"combining-alignment-and-distribution",children:"Combining Alignment and Distribution"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:"// Create a grid layout: align vertically, distribute horizontally\nstate.selectElement('element-1');\nstate.addToSelection('element-2');\nstate.addToSelection('element-3');\n\n// First align all elements to their shared center Y\nstate.alignMiddle();\n\n// Then distribute horizontally for equal spacing\nstate.distributeHorizontally();\n"})}),"\n",(0,s.jsx)(t.h2,{id:"ui-integration",children:"UI Integration"}),"\n",(0,s.jsxs)(t.p,{children:["Distribution controls are located in the ",(0,s.jsx)(t.strong,{children:"Arrange Panel"})," within the sidebar:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-tsx",children:'// Distribution buttons in ArrangePanel.tsx\nconst distributionButtons: ButtonConfig[] = [\n  { \n    handler: currentHandlers.distributeHorizontally, \n    icon: <ArrowLeftRight size={12} />, \n    title: "Distribute Horizontally", \n    disabled: !canDistribute \n  },\n  { \n    handler: currentHandlers.distributeVertically, \n    icon: <ArrowUpDown size={12} />, \n    title: "Distribute Vertically", \n    disabled: !canDistribute \n  }\n];\n'})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Conditions for enabling:"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"canDistribute = selectedCount >= 3"})," (for element distribution)"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"canDistribute = selectedCommandsCount >= 3"})," (for edit mode)"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"canDistribute = selectedSubpathsCount >= 3"})," (for subpath mode)"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsx)(t.h3,{id:"for-users",children:"For Users"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Select outer boundaries first"}),": The first and last elements (by position) define the distribution span"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Combine with alignment"}),": Use alignment to set a common axis, then distribute for spacing"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Use with grids"}),": Enable grid snapping for precise distributed layouts"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Work with copies"}),": Test distribution on duplicates before applying to originals"]}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"for-plugin-developers",children:"For Plugin Developers"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Validate selection count"}),": Always check ",(0,s.jsx)(t.code,{children:"selectedIds.length >= 3"})," before calling distribution methods"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Respect element hierarchy"}),": Distribution only affects root-level elements (not children)"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Update atomically"}),": Use single ",(0,s.jsx)(t.code,{children:"set()"})," call to update all element positions"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Integrate with undo"}),": Distribution operations are automatically added to undo stack"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Provide visual feedback"}),": Show distribution gaps or guides during preview"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"common-use-cases",children:"Common Use Cases"}),"\n",(0,s.jsx)(t.h3,{id:"create-evenly-spaced-navigation",children:"Create Evenly-Spaced Navigation"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:"// Select all navigation items\nconst navItems = ['nav-1', 'nav-2', 'nav-3', 'nav-4'];\nnavItems.forEach(id => state.addToSelection(id));\n\n// Distribute horizontally for equal spacing\nstate.distributeHorizontally();\n"})}),"\n",(0,s.jsx)(t.h3,{id:"organize-form-fields-vertically",children:"Organize Form Fields Vertically"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:"// Select all form fields\nconst formFields = state.elements.filter(el => \n  el.type === 'path' && el.data?.role === 'form-field'\n).map(el => el.id);\n\nformFields.forEach(id => state.addToSelection(id));\n\n// Distribute vertically\nstate.distributeVertically();\n"})}),"\n",(0,s.jsx)(t.h3,{id:"create-button-grid",children:"Create Button Grid"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typescript",children:"// Step 1: Align all buttons to top edge\nstate.alignTop();\n\n// Step 2: Distribute horizontally\nstate.distributeHorizontally();\n\n// Result: Buttons aligned at top with equal horizontal spacing\n"})}),"\n",(0,s.jsx)(t.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.a,{href:"/ttpe/docs/docs/features/alignment",children:"Alignment"})," - Align elements to common edges"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.a,{href:"/ttpe/docs/docs/features/selection",children:"Selection System"})," - Element selection"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.a,{href:"/ttpe/docs/docs/features/transforms",children:"Transform System"})," - Element transformation"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.a,{href:"/ttpe/docs/docs/app-structure/sidebar",children:"Arrange Panel"})," - UI controls"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.a,{href:"/ttpe/docs/docs/plugins/catalog/select",children:"Select Plugin"})," - Plugin implementation"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.a,{href:"/ttpe/docs/docs/plugins/catalog/edit",children:"Edit Plugin"})," - Edit mode distribution"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.a,{href:"/ttpe/docs/docs/plugins/catalog/subpath",children:"Subpath Plugin"})," - Subpath distribution"]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,l.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>o});var i=n(6540);const s={},l=i.createContext(s);function r(e){const t=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(l.Provider,{value:t},e.children)}}}]);