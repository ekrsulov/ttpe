"use strict";(self.webpackChunkttpe_docs=self.webpackChunkttpe_docs||[]).push([[5597],{5839:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"utilities/hooks","title":"React Hooks","description":"TTPE provides a collection of custom React hooks that encapsulate common patterns and logic used throughout the application. These hooks promote code reuse, maintain consistency, and simplify component implementations.","source":"@site/docs/utilities/hooks.md","sourceDirName":"utilities","slug":"/utilities/hooks","permalink":"/ttpe/docs/utilities/hooks","draft":false,"unlisted":false,"editUrl":"https://github.com/ekrsulov/ttpe/tree/main/doc/docs/utilities/hooks.md","tags":[],"version":"current","lastUpdatedBy":"Ernesto Krsulovic","lastUpdatedAt":1762144179000,"frontMatter":{"id":"hooks","title":"React Hooks","sidebar_label":"Hooks"},"sidebar":"docs","previous":{"title":"Accessibility","permalink":"/ttpe/docs/ui/accessibility"},"next":{"title":"Operations","permalink":"/ttpe/docs/ops/operations"}}');var i=s(4848),r=s(8453);const l={id:"hooks",title:"React Hooks",sidebar_label:"Hooks"},o="React Hooks",d={},c=[{value:"Overview",id:"overview",level:2},{value:"Hooks Catalog",id:"hooks-catalog",level:2},{value:"useDeletionActions",id:"usedeletionactions",level:3},{value:"useDragResize",id:"usedragresize",level:3},{value:"useRenderCount",id:"userendercount",level:3},{value:"useSelectionBounds",id:"useselectionbounds",level:3},{value:"useSelectPanelActions",id:"useselectpanelactions",level:3},{value:"usePanelToggleHandlers",id:"usepaneltogglehandlers",level:3},{value:"useSidebarFooterHeight",id:"usesidebarfooterheight",level:3},{value:"Hook Patterns",id:"hook-patterns",level:2},{value:"Selector Pattern",id:"selector-pattern",level:3},{value:"Memoization Pattern",id:"memoization-pattern",level:3},{value:"Callback Pattern",id:"callback-pattern",level:3},{value:"Cleanup Pattern",id:"cleanup-pattern",level:3},{value:"useArrangeHandlers",id:"usearrangehandlers",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"For Hook Consumers",id:"for-hook-consumers",level:3},{value:"For Hook Developers",id:"for-hook-developers",level:3},{value:"Related Documentation",id:"related-documentation",level:2},{value:"Hooks File Structure",id:"hooks-file-structure",level:2},{value:"Creating New Hooks",id:"creating-new-hooks",level:2}];function a(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"react-hooks",children:"React Hooks"})}),"\n",(0,i.jsxs)(n.p,{children:["TTPE provides a collection of ",(0,i.jsx)(n.strong,{children:"custom React hooks"})," that encapsulate common patterns and logic used throughout the application. These hooks promote code reuse, maintain consistency, and simplify component implementations."]}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(n.p,{children:["All custom hooks are located in ",(0,i.jsx)(n.code,{children:"/src/hooks/"})," and follow React hooks conventions:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Names start with ",(0,i.jsx)(n.code,{children:"use"})," prefix"]}),"\n",(0,i.jsx)(n.li,{children:"Can call other hooks"}),"\n",(0,i.jsx)(n.li,{children:"Must be called at the top level of components"}),"\n",(0,i.jsx)(n.li,{children:"Return data, handlers, or both"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"hooks-catalog",children:"Hooks Catalog"}),"\n",(0,i.jsx)(n.h3,{id:"usedeletionactions",children:"useDeletionActions"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Purpose"}),": Centralized hook for handling deletion operations across the application."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Location"}),": ",(0,i.jsx)(n.code,{children:"/src/hooks/useDeletionActions.ts"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use Cases"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Delete button in Bottom Action Bar"}),"\n",(0,i.jsx)(n.li,{children:"Keyboard shortcuts (Delete/Backspace keys)"}),"\n",(0,i.jsx)(n.li,{children:"Context menu delete actions"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Interface"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"interface UseDeletionActionsOptions {\n  selectedCommandsCount: number;       // Number of selected path commands\n  selectedSubpathsCount: number;       // Number of selected subpaths\n  selectedElementsCount: number;       // Number of selected canvas elements\n  activePlugin?: string | null;        // Current active plugin/tool\n  usePluginStrategy?: boolean;         // Use plugin-aware strategy (true) or priority-based (false)\n  deleteSelectedCommands?: () => void;\n  deleteSelectedSubpaths?: () => void;\n  deleteSelectedElements: () => void;\n}\n\ninterface DeletionActions {\n  scope: DeletionScope;        // What will be deleted (commands/subpaths/elements)\n  canDelete: boolean;          // Whether deletion is possible\n  executeDeletion: () => boolean; // Execute the deletion\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Usage"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"import { useDeletionActions } from '@/hooks/useDeletionActions';\n\n// In BottomActionBar (plugin-aware strategy):\nconst { scope, canDelete, executeDeletion } = useDeletionActions({\n  selectedCommandsCount,\n  selectedSubpathsCount,\n  selectedElementsCount: selectedIds.length,\n  activePlugin,\n  usePluginStrategy: true, // Respects active plugin context\n  deleteSelectedCommands,\n  deleteSelectedSubpaths,\n  deleteSelectedElements,\n});\n\n<ToolbarIconButton\n  icon={Trash2}\n  label={`Delete ${scope.label}`}\n  onClick={executeDeletion}\n  counter={scope.count}\n  counterColor=\"red\"\n  isDisabled={!canDelete}\n/>\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Strategies"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Plugin-aware strategy"})," (",(0,i.jsx)(n.code,{children:"usePluginStrategy: true"}),"):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"In Edit/Subpath plugin \u2192 Delete commands (if selected)"}),"\n",(0,i.jsx)(n.li,{children:"In Edit plugin \u2192 Delete subpaths (if selected)"}),"\n",(0,i.jsx)(n.li,{children:"Otherwise \u2192 Delete canvas elements"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Priority-based strategy"})," (",(0,i.jsx)(n.code,{children:"usePluginStrategy: false"}),"):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Priority order: Commands > Subpaths > Elements"}),"\n",(0,i.jsx)(n.li,{children:"Used for keyboard shortcuts (respects selection hierarchy)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Deletion Scopes"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"type DeletionScope = {\n  type: 'commands' | 'subpaths' | 'elements' | 'none';\n  count: number;\n  label: string; // Human-readable label (e.g., \"3 commands\", \"1 element\")\n};\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"usedragresize",children:"useDragResize"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Purpose"}),": Implements drag-to-resize functionality with pointer events."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Location"}),": ",(0,i.jsx)(n.code,{children:"/src/hooks/useDragResize.ts"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use Cases"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Sidebar resize handle (horizontal resize from right edge)"}),"\n",(0,i.jsx)(n.li,{children:"Select Panel height adjustment (vertical resize, drag up = increase)"}),"\n",(0,i.jsx)(n.li,{children:"Resizable panels and containers"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Interface"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"interface UseDragResizeOptions {\n  onResize: (newValue: number) => void;  // Callback with new width/height\n  onReset?: () => void;                   // Double-click to reset\n  minValue: number;                       // Minimum width/height\n  maxValue: number;                       // Maximum width/height\n  direction?: 'horizontal' | 'vertical';  // Resize direction (default: 'horizontal')\n  reverseHorizontal?: boolean;            // Resize from right edge (default: false)\n  reverseVertical?: boolean;              // Drag up = increase (default: false)\n  initialValue?: number;                  // For calculating delta in reverse vertical mode\n}\n\ninterface UseDragResizeResult {\n  isDragging: boolean;                          // Whether currently dragging\n  handlePointerDown: (e: React.PointerEvent) => void; // Start drag handler\n  handleDoubleClick: (e: React.MouseEvent) => void;   // Reset handler\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Usage"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"import { useDragResize } from '@/hooks/useDragResize';\n\n// Sidebar resize handle (horizontal, from right edge):\nconst { isDragging, handlePointerDown, handleDoubleClick } = useDragResize({\n  onResize: (width) => setSidebarWidth(width),\n  onReset: () => setSidebarWidth(DEFAULT_WIDTH),\n  minValue: 260,\n  maxValue: 600,\n  direction: 'horizontal',\n  reverseHorizontal: true, // Resize from right edge\n});\n\n<div\n  onPointerDown={handlePointerDown}\n  onDoubleClick={handleDoubleClick}\n  style={{\n    width: '4px',\n    cursor: isDragging ? 'ew-resize' : 'col-resize',\n    backgroundColor: isDragging ? 'blue' : 'transparent',\n  }}\n/>\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"// Select Panel height (vertical, drag up = increase):\nconst { isDragging, handlePointerDown, handleDoubleClick } = useDragResize({\n  onResize: (height) => setSelectPanelHeight(height),\n  onReset: () => setSelectPanelHeight(DEFAULT_HEIGHT),\n  minValue: 200,\n  maxValue: 800,\n  direction: 'vertical',\n  reverseVertical: true, // Drag up increases height\n  initialValue: currentHeight,\n});\n\n<div\n  onPointerDown={handlePointerDown}\n  onDoubleClick={handleDoubleClick}\n  style={{\n    height: '4px',\n    cursor: isDragging ? 'ns-resize' : 'row-resize',\n  }}\n/>\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Features"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Unified mouse and touch support via pointer events"}),"\n",(0,i.jsx)(n.li,{children:"Prevents text selection during drag"}),"\n",(0,i.jsxs)(n.li,{children:["Constrains value within min/max bounds using ",(0,i.jsx)(n.code,{children:"clamp"})," utility"]}),"\n",(0,i.jsxs)(n.li,{children:["Sets appropriate cursor during drag (",(0,i.jsx)(n.code,{children:"ew-resize"})," or ",(0,i.jsx)(n.code,{children:"ns-resize"}),")"]}),"\n",(0,i.jsx)(n.li,{children:"Double-click to reset to default value"}),"\n",(0,i.jsx)(n.li,{children:"Global pointer event listeners (works across entire window)"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"userendercount",children:"useRenderCount"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Purpose"}),": Debug hook to count component renders and calculate renders per second (RPS)."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Location"}),": ",(0,i.jsx)(n.code,{children:"/src/hooks/useRenderCount.ts"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use Cases"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Performance profiling"}),"\n",(0,i.jsx)(n.li,{children:"Identifying re-render issues"}),"\n",(0,i.jsx)(n.li,{children:"Debug mode monitoring"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Interface"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"interface RenderCountData {\n  count: number; // Total render count since mount\n  rps: number;   // Renders per second (based on last 2 seconds)\n}\n\nfunction useRenderCount(componentName?: string): RenderCountData;\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Usage"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"import { useRenderCount } from '@/hooks/useRenderCount';\n\nfunction MyExpensiveComponent() {\n  const { count, rps } = useRenderCount('MyExpensiveComponent');\n\n  // Only logs if settings.showRenderCountBadges is enabled\n  // Logs: \"[Render Count] MyExpensiveComponent: 42 (5.2 r/s)\"\n\n  return (\n    <div>\n      {/* Component content */}\n      {import.meta.env.DEV && (\n        <div>Renders: {count} ({rps} r/s)</div>\n      )}\n    </div>\n  );\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Used by"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"RenderCountBadge"})," component"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"RenderCountBadgeWrapper"})," component"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"withRenderCountBadge"})," HOC"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Algorithm"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Increment render count on every render"}),"\n",(0,i.jsx)(n.li,{children:"Store timestamps in array (last 2 seconds)"}),"\n",(0,i.jsxs)(n.li,{children:["Calculate RPS: ",(0,i.jsx)(n.code,{children:"renders / timeSpan"})]}),"\n",(0,i.jsx)(n.li,{children:"Filter old timestamps to maintain sliding window"}),"\n",(0,i.jsxs)(n.li,{children:["Log to console if ",(0,i.jsx)(n.code,{children:"showRenderCountBadges"})," enabled in settings"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Typical RPS Values"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"0-2 RPS"}),": Normal, stable component"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"3-10 RPS"}),": Moderate updates (e.g., animation, cursor tracking)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"10+ RPS"}),": High-frequency updates, potential optimization target"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"useselectionbounds",children:"useSelectionBounds"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Purpose"}),": Compute selection bounds data for overlay rendering."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Location"}),": ",(0,i.jsx)(n.code,{children:"/src/hooks/useSelectionBounds.ts"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use Cases"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Selection overlay (blue dashed rectangles)"}),"\n",(0,i.jsx)(n.li,{children:"Transformation overlay (resize/rotate handles)"}),"\n",(0,i.jsx)(n.li,{children:"Measuring selected elements and subpaths"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Interface"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"interface UseSelectionBoundsParams {\n  element: SelectionBoundsElement;              // Element being measured\n  bounds: BoundingBox | null;                   // Element bounding box\n  viewport: Viewport;                           // Current viewport (zoom, pan)\n  selectedSubpaths?: SelectedSubpath[];         // Selected subpaths within element\n  skipSubpathMeasurements?: boolean;            // Skip subpath calculations (default: false)\n}\n\ninterface UseSelectionBoundsResult {\n  selectionColor: string;                       // Color from element data (stroke/fill)\n  strokeWidth: number;                          // Stroke width for rendering\n  adjustedElementBounds: BoundingBox | null;    // Bounds adjusted for zoom\n  elementRects: SelectionRect[];                // Rectangle data for element bounds\n  subpathBoundsResults: SubpathBoundsResult[];  // Measured subpath bounds\n  subpathRects: SelectionRect[];                // Rectangle data for subpath bounds\n  subpathSelectionColor: string;                // Color for subpath selection (constant)\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Usage"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'import { useSelectionBounds } from \'@/hooks/useSelectionBounds\';\n\nfunction SelectionOverlay({ element, viewport }) {\n  const bounds = useMemo(() => measureElement(element), [element]);\n  \n  const {\n    selectionColor,\n    strokeWidth,\n    adjustedElementBounds,\n    elementRects,\n    subpathRects,\n  } = useSelectionBounds({\n    element,\n    bounds,\n    viewport,\n    selectedSubpaths,\n  });\n\n  return (\n    <>\n      {/* Element selection rectangle */}\n      {elementRects.map((rect) => (\n        <rect\n          key={rect.key}\n          x={rect.x}\n          y={rect.y}\n          width={rect.width}\n          height={rect.height}\n          stroke={selectionColor}\n          strokeWidth={strokeWidth}\n          fill="none"\n          strokeDasharray="4 4"\n        />\n      ))}\n      \n      {/* Subpath selection rectangles */}\n      {subpathRects.map((rect) => (\n        <rect\n          key={rect.key}\n          x={rect.x}\n          y={rect.y}\n          width={rect.width}\n          height={rect.height}\n          stroke="red"\n          strokeWidth={2}\n          fill="none"\n        />\n      ))}\n    </>\n  );\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Features"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Derives selection color from element stroke/fill"}),"\n",(0,i.jsx)(n.li,{children:"Computes zoom-adjusted bounds (accounts for viewport zoom)"}),"\n",(0,i.jsx)(n.li,{children:"Measures selected subpaths independently"}),"\n",(0,i.jsx)(n.li,{children:"Builds rectangle data ready for SVG rendering"}),"\n",(0,i.jsx)(n.li,{children:"Memoizes expensive calculations"}),"\n",(0,i.jsx)(n.li,{children:"Skip subpath measurements for performance (transformation mode)"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Coordinate Adjustment"}),":"]}),"\n",(0,i.jsx)(n.p,{children:"The hook adjusts bounds for zoom to ensure pixel-perfect overlay rendering:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"const adjustedBounds = computeAdjustedBounds(rawBounds, viewport.zoom);\n// Expands bounds slightly to accommodate stroke width at current zoom\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"useselectpanelactions",children:"useSelectPanelActions"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Purpose"}),": Shared store subscriptions for Select Panel components."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Location"}),": ",(0,i.jsx)(n.code,{children:"/src/hooks/useSelectPanelActions.ts"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use Cases"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Select Panel item components"}),"\n",(0,i.jsx)(n.li,{children:"Select Panel group components"}),"\n",(0,i.jsx)(n.li,{children:"Visibility/lock controls"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Interface"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"interface SelectPanelActions {\n  // Element actions\n  toggleElementVisibility: (elementId: string) => void;\n  toggleElementLock: (elementId: string) => void;\n  selectElement: (id: string) => void;\n  \n  // Group actions\n  toggleGroupVisibility: (groupId: string) => void;\n  toggleGroupLock: (groupId: string) => void;\n  selectGroup: (id: string) => void;\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Usage"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"import { useSelectPanelActions } from '@/hooks/useSelectPanelActions';\n\nfunction SelectPanelItem({ element }) {\n  const {\n    toggleElementVisibility,\n    toggleElementLock,\n    selectElement,\n  } = useSelectPanelActions();\n\n  return (\n    <div onClick={() => selectElement(element.id)}>\n      <IconButton\n        icon={element.isHidden ? EyeOff : Eye}\n        onClick={(e) => {\n          e.stopPropagation();\n          toggleElementVisibility(element.id);\n        }}\n      />\n      <IconButton\n        icon={element.isLocked ? Lock : Unlock}\n        onClick={(e) => {\n          e.stopPropagation();\n          toggleElementLock(element.id);\n        }}\n      />\n      {element.name}\n    </div>\n  );\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Benefits"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Consistent store subscriptions across Select Panel components"}),"\n",(0,i.jsx)(n.li,{children:"Single source of truth for panel actions"}),"\n",(0,i.jsx)(n.li,{children:"Prevents duplicate subscriptions"}),"\n",(0,i.jsx)(n.li,{children:"Simplifies component implementations"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"usepaneltogglehandlers",children:"usePanelToggleHandlers"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Purpose"}),": Generic hook for creating toggle handlers in panel components."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Location"}),": ",(0,i.jsx)(n.code,{children:"/src/hooks/usePanelToggleHandlers.ts"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use Cases"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Grid Panel toggles (enabled, snap, rulers)"}),"\n",(0,i.jsx)(n.li,{children:"Guidelines Panel toggles (enabled, snap)"}),"\n",(0,i.jsx)(n.li,{children:"Settings Panel toggles (various settings)"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Interface"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"function usePanelToggleHandlers<T extends Record<string, unknown>>(\n  updater?: (updates: Partial<T>) => void\n): {\n  createToggleHandler: (key: keyof T) => (e: React.ChangeEvent<HTMLInputElement>) => void;\n};\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Usage"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"import { usePanelToggleHandlers } from '@/hooks/usePanelToggleHandlers';\nimport { PanelToggle } from '@/ui/PanelToggle';\n\nfunction GridPanel() {\n  const updateGridState = useCanvasStore(state => state.updateGrid);\n  const grid = useCanvasStore(state => state.grid);\n  \n  const { createToggleHandler } = usePanelToggleHandlers(updateGridState);\n\n  return (\n    <>\n      <PanelToggle\n        isChecked={grid.enabled}\n        onChange={createToggleHandler('enabled')}\n      >\n        Enable Grid\n      </PanelToggle>\n      \n      <PanelToggle\n        isChecked={grid.snapToGrid}\n        onChange={createToggleHandler('snapToGrid')}\n      >\n        Snap to Grid\n      </PanelToggle>\n      \n      <PanelToggle\n        isChecked={grid.showRulers}\n        onChange={createToggleHandler('showRulers')}\n      >\n        Show Rulers\n      </PanelToggle>\n    </>\n  );\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Benefits"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Eliminates toggle handler duplication"}),"\n",(0,i.jsx)(n.li,{children:"Type-safe key references (TypeScript autocomplete)"}),"\n",(0,i.jsx)(n.li,{children:"Handles undefined updater gracefully (no-op)"}),"\n",(0,i.jsx)(n.li,{children:"Consistent event handling pattern"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Before/After"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"// \u274c Before: Verbose, repetitive\nconst handleToggleEnabled = (e: React.ChangeEvent<HTMLInputElement>) => {\n  updateGrid({ enabled: e.target.checked });\n};\nconst handleToggleSnap = (e: React.ChangeEvent<HTMLInputElement>) => {\n  updateGrid({ snapToGrid: e.target.checked });\n};\nconst handleToggleRulers = (e: React.ChangeEvent<HTMLInputElement>) => {\n  updateGrid({ showRulers: e.target.checked });\n};\n\n// \u2705 After: Concise, reusable\nconst { createToggleHandler } = usePanelToggleHandlers(updateGrid);\nonChange={createToggleHandler('enabled')}\nonChange={createToggleHandler('snapToGrid')}\nonChange={createToggleHandler('showRulers')}\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"usesidebarfooterheight",children:"useSidebarFooterHeight"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Purpose"}),": Manages CSS variable ",(0,i.jsx)(n.code,{children:"--sidebar-footer-height"})," for dynamic footer sizing."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Location"}),": ",(0,i.jsx)(n.code,{children:"/src/hooks/useSidebarFooterHeight.ts"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use Cases"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Select Panel footer (ungroup/collapse controls)"}),"\n",(0,i.jsx)(n.li,{children:"Sidebar footer with actions"}),"\n",(0,i.jsx)(n.li,{children:"Panels with dynamic bottom sections"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Interface"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"function useSidebarFooterHeight(\n  additionalOffset?: number // Optional offset to add (default: 0)\n): React.RefObject<HTMLDivElement>; // Ref to attach to footer element\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Usage"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"import { useSidebarFooterHeight } from '@/hooks/useSidebarFooterHeight';\n\nfunction SelectPanel() {\n  const footerRef = useSidebarFooterHeight();\n\n  return (\n    <div>\n      <div style={{ paddingBottom: 'var(--sidebar-footer-height)' }}>\n        {/* Scrollable content */}\n      </div>\n      \n      <div\n        ref={footerRef}\n        style={{\n          position: 'fixed',\n          bottom: 0,\n          left: 0,\n          right: 0,\n          backgroundColor: 'white',\n        }}\n      >\n        {/* Footer controls */}\n        <button>Ungroup</button>\n        <button>Collapse</button>\n      </div>\n    </div>\n  );\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"With Additional Offset"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"// Add padding/margin to measured height\nconst footerRef = useSidebarFooterHeight(80);\n// CSS variable will be: actual height + 80px\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Features"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Automatically measures footer height using ",(0,i.jsx)(n.code,{children:"offsetHeight"})]}),"\n",(0,i.jsxs)(n.li,{children:["Sets CSS custom property ",(0,i.jsx)(n.code,{children:"--sidebar-footer-height"})]}),"\n",(0,i.jsxs)(n.li,{children:["Uses ",(0,i.jsx)(n.code,{children:"ResizeObserver"})," for dynamic updates (if available)"]}),"\n",(0,i.jsx)(n.li,{children:"Cleans up CSS variable on unmount"}),"\n",(0,i.jsxs)(n.li,{children:["Fallback for browsers without ",(0,i.jsx)(n.code,{children:"ResizeObserver"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"CSS Integration"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-css",children:".panel-content {\n  padding-bottom: var(--sidebar-footer-height, 0px);\n  /* Prevents content from being hidden by fixed footer */\n}\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"hook-patterns",children:"Hook Patterns"}),"\n",(0,i.jsx)(n.h3,{id:"selector-pattern",children:"Selector Pattern"}),"\n",(0,i.jsxs)(n.p,{children:["Many hooks use ",(0,i.jsx)(n.strong,{children:"granular Zustand selectors"})," to minimize re-renders:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"// \u274c Bad: Re-renders on ANY state change\nconst state = useCanvasStore();\n\n// \u2705 Good: Only re-renders when specific value changes\nconst toggleElementVisibility = useCanvasStore(state => state.toggleElementVisibility);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"memoization-pattern",children:"Memoization Pattern"}),"\n",(0,i.jsxs)(n.p,{children:["Expensive calculations are memoized with ",(0,i.jsx)(n.code,{children:"useMemo"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"const bounds = useMemo(() => \n  measureElement(element), \n  [element]\n);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"callback-pattern",children:"Callback Pattern"}),"\n",(0,i.jsxs)(n.p,{children:["Event handlers are wrapped with ",(0,i.jsx)(n.code,{children:"useCallback"})," to prevent re-creation:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"const handleResize = useCallback(\n  (newWidth: number) => {\n    setSidebarWidth(newWidth);\n  },\n  [setSidebarWidth]\n);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"cleanup-pattern",children:"Cleanup Pattern"}),"\n",(0,i.jsx)(n.p,{children:"Effects that add global listeners always clean up:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"useEffect(() => {\n  if (isDragging) {\n    document.addEventListener('pointermove', handleMove);\n    return () => {\n      document.removeEventListener('pointermove', handleMove);\n    };\n  }\n}, [isDragging, handleMove]);\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"usearrangehandlers",children:"useArrangeHandlers"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Purpose"}),": Provides context-aware handlers for alignment, distribution, size matching, and ordering operations based on the active plugin mode."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Location"}),": ",(0,i.jsx)(n.code,{children:"/src/hooks/useArrangeHandlers.ts"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use Cases"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"ArrangePanel buttons in sidebar footer"}),"\n",(0,i.jsx)(n.li,{children:"Alignment operations across different editing modes"}),"\n",(0,i.jsx)(n.li,{children:"Distribution and ordering of elements, points, or subpaths"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Interface"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"interface ArrangeHandlers {\n  // Alignment\n  alignLeft: () => void;\n  alignCenter: () => void;\n  alignRight: () => void;\n  alignTop: () => void;\n  alignMiddle: () => void;\n  alignBottom: () => void;\n  \n  // Distribution\n  distributeHorizontally: () => void;\n  distributeVertically: () => void;\n  \n  // Size matching\n  matchWidthToLargest: () => void;\n  matchHeightToLargest: () => void;\n  \n  // Ordering (z-index)\n  bringToFront: () => void;\n  sendForward: () => void;\n  sendBackward: () => void;\n  sendToBack: () => void;\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Usage"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"import { useArrangeHandlers } from '@/hooks/useArrangeHandlers';\n\nconst ArrangePanel: React.FC = () => {\n  const handlers = useArrangeHandlers();\n  \n  return (\n    <HStack>\n      <IconButton onClick={handlers.alignLeft} icon={<AlignLeft />} />\n      <IconButton onClick={handlers.alignCenter} icon={<AlignCenter />} />\n      <IconButton onClick={handlers.distributeHorizontally} icon={<ArrowLeftRight />} />\n    </HStack>\n  );\n};\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Context-Aware Behavior"}),":"]}),"\n",(0,i.jsxs)(n.p,{children:["The hook automatically selects the appropriate handlers based on ",(0,i.jsx)(n.code,{children:"activePlugin"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Default mode"})," (select, pencil, shape, etc.):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Operations target selected canvas ",(0,i.jsx)(n.strong,{children:"elements"})]}),"\n",(0,i.jsxs)(n.li,{children:["Uses: ",(0,i.jsx)(n.code,{children:"alignLeft()"}),", ",(0,i.jsx)(n.code,{children:"distributeHorizontally()"}),", ",(0,i.jsx)(n.code,{children:"bringToFront()"}),", etc."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Edit mode"})," (",(0,i.jsx)(n.code,{children:"activePlugin === 'edit'"}),"):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Operations target selected ",(0,i.jsx)(n.strong,{children:"control points"})," (commands)"]}),"\n",(0,i.jsxs)(n.li,{children:["Uses: ",(0,i.jsx)(n.code,{children:"alignLeftCommands()"}),", ",(0,i.jsx)(n.code,{children:"distributeHorizontallyCommands()"}),", etc."]}),"\n",(0,i.jsx)(n.li,{children:"Ordering operations are disabled (no-op functions)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Subpath mode"})," (",(0,i.jsx)(n.code,{children:"activePlugin === 'subpath'"}),"):"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Operations target selected ",(0,i.jsx)(n.strong,{children:"subpaths"})]}),"\n",(0,i.jsxs)(n.li,{children:["Uses: ",(0,i.jsx)(n.code,{children:"alignLeftSubpaths()"}),", ",(0,i.jsx)(n.code,{children:"distributeHorizontallySubpaths()"}),", ",(0,i.jsx)(n.code,{children:"bringSubpathToFront()"}),", etc."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Implementation Details"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"export const useArrangeHandlers = () => {\n  const activePlugin = useCanvasStore(state => state.activePlugin);\n  const store = useCanvasStore.getState();\n\n  const handlers = useMemo(() => {\n    const handlerMaps = {\n      select: {\n        alignLeft: store.alignLeft,\n        // ... standard element operations\n        bringToFront: store.bringToFront,\n      },\n      edit: {\n        alignLeft: store.alignLeftCommands,\n        // ... command operations\n        bringToFront: () => {}, // Disabled in edit mode\n      },\n      subpath: {\n        alignLeft: store.alignLeftSubpaths,\n        // ... subpath operations\n        bringToFront: store.bringSubpathToFront,\n      }\n    };\n\n    return handlerMaps[activePlugin] || handlerMaps.select;\n  }, [activePlugin, store]);\n\n  return handlers;\n};\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Store Methods"}),":"]}),"\n",(0,i.jsx)(n.p,{children:"The hook maps to these Canvas Store methods:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Operation"}),(0,i.jsx)(n.th,{children:"Elements"}),(0,i.jsx)(n.th,{children:"Commands (Edit)"}),(0,i.jsx)(n.th,{children:"Subpaths"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Align Left"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"alignLeft()"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"alignLeftCommands()"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"alignLeftSubpaths()"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Align Center"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"alignCenter()"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"alignCenterCommands()"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"alignCenterSubpaths()"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Align Right"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"alignRight()"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"alignRightCommands()"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"alignRightSubpaths()"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Align Top"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"alignTop()"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"alignTopCommands()"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"alignTopSubpaths()"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Align Middle"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"alignMiddle()"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"alignMiddleCommands()"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"alignMiddleSubpaths()"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Align Bottom"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"alignBottom()"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"alignBottomCommands()"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"alignBottomSubpaths()"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Distribute H"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"distributeHorizontally()"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"distributeHorizontallyCommands()"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"distributeHorizontallySubpaths()"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Distribute V"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"distributeVertically()"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"distributeVerticallyCommands()"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"distributeVerticallySubpaths()"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Match Width"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"matchWidthToLargest()"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"matchWidthToLargestCommands()"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"matchWidthToLargestSubpaths()"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Match Height"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"matchHeightToLargest()"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"matchHeightToLargestCommands()"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"matchHeightToLargestSubpaths()"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Bring to Front"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"bringToFront()"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.em,{children:"(disabled)"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"bringSubpathToFront()"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Send Forward"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"sendForward()"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.em,{children:"(disabled)"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"sendSubpathForward()"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Send Backward"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"sendBackward()"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.em,{children:"(disabled)"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"sendSubpathBackward()"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Send to Back"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"sendToBack()"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.em,{children:"(disabled)"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"sendSubpathToBack()"})})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Performance"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Handlers are memoized with ",(0,i.jsx)(n.code,{children:"useMemo"})," to prevent recreation on every render"]}),"\n",(0,i.jsxs)(n.li,{children:["Only subscribes to ",(0,i.jsx)(n.code,{children:"activePlugin"})," changes, not the entire store"]}),"\n",(0,i.jsx)(n.li,{children:"Returns stable function references for optimal re-render behavior"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Example - ArrangePanel Integration"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"const ArrangePanelComponent: React.FC = () => {\n  const currentHandlers = useArrangeHandlers();\n  const selectedCount = useCanvasStore(state => state.selectedIds.length);\n  const selectedCommandsCount = useCanvasStore(state => state.selectedCommands?.length ?? 0);\n  const activePlugin = useCanvasStore.getState().activePlugin;\n\n  const canAlign = selectedCount >= 2 || \n    (activePlugin === 'edit' && selectedCommandsCount >= 2);\n\n  const alignmentButtons = [\n    { handler: currentHandlers.alignLeft, icon: <AlignLeft />, disabled: !canAlign },\n    { handler: currentHandlers.alignCenter, icon: <AlignCenter />, disabled: !canAlign },\n    { handler: currentHandlers.alignRight, icon: <AlignRight />, disabled: !canAlign },\n  ];\n\n  return (\n    <HStack>\n      {alignmentButtons.map(({ handler, icon, disabled }) => (\n        <IconButton onClick={handler} icon={icon} isDisabled={disabled} />\n      ))}\n    </HStack>\n  );\n};\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Related Components"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ArrangePanel"})," (",(0,i.jsx)(n.code,{children:"src/sidebar/panels/ArrangePanel.tsx"}),") - UI that consumes this hook"]}),"\n",(0,i.jsx)(n.li,{children:"Canvas Store alignment/distribution slices - Actual implementation of operations"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(n.h3,{id:"for-hook-consumers",children:"For Hook Consumers"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Call hooks at top level"}),": Never call hooks conditionally or in loops"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use correct dependencies"}),": Always include all values used inside effects/memos"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Avoid unnecessary subscriptions"}),": Use granular selectors, not entire state"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Test with React DevTools"}),": Profile component re-renders to verify optimization"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Read hook documentation"}),": Understand parameters and return values before using"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"for-hook-developers",children:"For Hook Developers"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Follow naming convention"}),": Always start with ",(0,i.jsx)(n.code,{children:"use"})," prefix"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Document parameters"}),": Use JSDoc comments with ",(0,i.jsx)(n.code,{children:"@param"})," and ",(0,i.jsx)(n.code,{children:"@returns"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Provide usage examples"}),": Include ",(0,i.jsx)(n.code,{children:"@example"})," in JSDoc"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Handle edge cases"}),": Check for null/undefined, provide sensible defaults"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Memoize expensive operations"}),": Use ",(0,i.jsx)(n.code,{children:"useMemo"})," and ",(0,i.jsx)(n.code,{children:"useCallback"})," appropriately"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Clean up side effects"}),": Remove listeners, clear timers, reset global state"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Export TypeScript interfaces"}),": Make hook contracts explicit"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Write tests"}),": Unit test hook logic with ",(0,i.jsx)(n.code,{children:"@testing-library/react-hooks"})]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"../api/canvas-store",children:"Canvas Store"})," - State management with Zustand"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/ttpe/docs/ui/components",children:"UI Components"})," - Components that use these hooks"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/ttpe/docs/features/selection",children:"Selection"})," - Uses selection-related hooks"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/ttpe/docs/app-structure/actionbars",children:"Action Bars"})," - Uses action hooks"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/ttpe/docs/architecture/overview#performance-optimizations",children:"Performance Optimization"})," - Optimization strategies"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"hooks-file-structure",children:"Hooks File Structure"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"src/hooks/\n\u251c\u2500\u2500 useDeletionActions.ts         # Centralized deletion logic\n\u251c\u2500\u2500 useDragResize.ts              # Drag-to-resize functionality\n\u251c\u2500\u2500 useRenderCount.ts             # Performance profiling\n\u251c\u2500\u2500 useSelectionBounds.ts         # Selection overlay calculations\n\u251c\u2500\u2500 useSelectPanelActions.ts      # Select Panel store actions\n\u251c\u2500\u2500 usePanelToggleHandlers.ts    # Generic toggle handler factory\n\u2514\u2500\u2500 useSidebarFooterHeight.ts    # Footer height CSS variable management\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"creating-new-hooks",children:"Creating New Hooks"}),"\n",(0,i.jsx)(n.p,{children:"When creating a new hook, follow this template:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import { useMemo, useCallback } from 'react';\n\n/**\n * Brief description of the hook's purpose\n * \n * @param param1 - Description of parameter\n * @returns Description of return value\n * \n * @example\n * ```tsx\n * const result = useMyHook({ option: 'value' });\n * ```\n */\nexport function useMyHook(options: MyHookOptions): MyHookResult {\n  // 1. Extract options with defaults\n  const { option1, option2 = 'default' } = options;\n\n  // 2. State and refs\n  const [state, setState] = useState(initialValue);\n\n  // 3. Memoized values\n  const computedValue = useMemo(() => {\n    return expensiveCalculation(option1);\n  }, [option1]);\n\n  // 4. Callbacks\n  const handleAction = useCallback(() => {\n    // Implementation\n  }, [/* dependencies */]);\n\n  // 5. Effects with cleanup\n  useEffect(() => {\n    // Setup\n    return () => {\n      // Cleanup\n    };\n  }, [/* dependencies */]);\n\n  // 6. Return interface\n  return {\n    value: computedValue,\n    action: handleAction,\n  };\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Checklist"}),":"]}),"\n",(0,i.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","JSDoc comment with description, params, returns, example"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","TypeScript interfaces exported for options and result"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Proper dependency arrays for ",(0,i.jsx)(n.code,{children:"useMemo"}),", ",(0,i.jsx)(n.code,{children:"useCallback"}),", ",(0,i.jsx)(n.code,{children:"useEffect"})]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Cleanup functions for side effects"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Sensible default values for optional parameters"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Memoization for expensive calculations"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Stable function references with ",(0,i.jsx)(n.code,{children:"useCallback"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>o});var t=s(6540);const i={},r=t.createContext(i);function l(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);