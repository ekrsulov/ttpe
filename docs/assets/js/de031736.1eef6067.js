"use strict";(self.webpackChunkttpe_docs=self.webpackChunkttpe_docs||[]).push([[7194],{3503:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>d});const l=JSON.parse('{"id":"app-structure/file-panel","title":"File Panel","description":"The File Panel provides import/export functionality and project management for TTPE. It allows users to import SVG files, export canvas to SVG/PNG, and save/load project files in JSON format.","source":"@site/docs/app-structure/file-panel.md","sourceDirName":"app-structure","slug":"/app-structure/file-panel","permalink":"/ttpe/docs/docs/app-structure/file-panel","draft":false,"unlisted":false,"editUrl":"https://github.com/ekrsulov/ttpe/tree/main/doc/docs/app-structure/file-panel.md","tags":[],"version":"current","lastUpdatedBy":"Ernesto Krsulovic","lastUpdatedAt":1762144584000,"frontMatter":{"id":"file-panel","title":"File Panel","sidebar_label":"File Panel"},"sidebar":"docs","previous":{"title":"Sidebar","permalink":"/ttpe/docs/docs/app-structure/sidebar"},"next":{"title":"Settings Panel","permalink":"/ttpe/docs/docs/app-structure/settings-panel"}}');var t=s(4848),i=s(8453);const r={id:"file-panel",title:"File Panel",sidebar_label:"File Panel"},a="File Panel",o={},d=[{value:"Overview",id:"overview",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Import SVG",id:"import-svg",level:2},{value:"Basic Import",id:"basic-import",level:3},{value:"Import Options",id:"import-options",level:3},{value:"Append Mode",id:"append-mode",level:4},{value:"Add Frame",id:"add-frame",level:4},{value:"Apply Union",id:"apply-union",level:4},{value:"Resize Import",id:"resize-import",level:4},{value:"Import Flow",id:"import-flow",level:3},{value:"Export SVG",id:"export-svg",level:2},{value:"Basic Export",id:"basic-export",level:3},{value:"Export Options",id:"export-options",level:3},{value:"Selected Only",id:"selected-only",level:4},{value:"SVG Output Format",id:"svg-output-format",level:3},{value:"Export PNG",id:"export-png",level:2},{value:"Basic Export",id:"basic-export-1",level:3},{value:"PNG Options",id:"png-options",level:3},{value:"Dimensions",id:"dimensions",level:4},{value:"Selected Only",id:"selected-only-1",level:4},{value:"Save/Load Project",id:"saveload-project",level:2},{value:"Save Project",id:"save-project",level:3},{value:"Load Project",id:"load-project",level:3},{value:"Document Name",id:"document-name",level:2},{value:"Usage",id:"usage",level:3},{value:"Panel Layout",id:"panel-layout",level:2},{value:"Integration with Canvas Store",id:"integration-with-canvas-store",level:2},{value:"File Formats",id:"file-formats",level:2},{value:"Supported Import Formats",id:"supported-import-formats",level:3},{value:"Supported Export Formats",id:"supported-export-formats",level:3},{value:"Related Documentation",id:"related-documentation",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"For Users",id:"for-users",level:3},{value:"For Developers",id:"for-developers",level:3},{value:"Future Enhancements",id:"future-enhancements",level:2}];function c(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"file-panel",children:"File Panel"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.strong,{children:"File Panel"})," provides import/export functionality and project management for TTPE. It allows users to import SVG files, export canvas to SVG/PNG, and save/load project files in JSON format."]}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(n.p,{children:["The File Panel (",(0,t.jsx)(n.code,{children:"/src/sidebar/panels/FilePanel.tsx"}),") is accessible via the ",(0,t.jsx)(n.strong,{children:"File button"})," in the Top Action Bar and provides:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Import SVG"}),": Load SVG files into canvas with advanced options"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Export SVG"}),": Save canvas as SVG file (all elements or selected only)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Export PNG"}),": Render canvas to PNG image with custom dimensions"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Save Project"}),": Serialize canvas state to JSON file"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Load Project"}),": Restore canvas from saved JSON file"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Document Name"}),": Set project name (used in filenames)"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,t.jsx)(n.mermaid,{value:"graph TB\n    FilePanel[FilePanel.tsx] --\x3e Import[SVG Import]\n    FilePanel --\x3e ExportSVG[Export SVG]\n    FilePanel --\x3e ExportPNG[Export PNG]\n    FilePanel --\x3e SaveLoad[Save/Load Project]\n    \n    Import --\x3e Parser[SVG Parser]\n    Import --\x3e Options[Import Options]\n    \n    Options --\x3e AppendMode[Append Mode]\n    Options --\x3e AddFrame[Add Frame]\n    Options --\x3e ApplyUnion[Apply Union]\n    Options --\x3e Resize[Resize Import]\n    \n    ExportSVG --\x3e SVGSerializer[SVG Serializer]\n    ExportSVG --\x3e SelectedOnly[Selected Only Filter]\n    \n    ExportPNG --\x3e Canvas2PNG[Canvas to PNG]\n    ExportPNG --\x3e Dimensions[Custom Dimensions]\n    \n    SaveLoad --\x3e JSONSerializer[JSON Serializer]\n    SaveLoad --\x3e Storage[File System]"}),"\n",(0,t.jsx)(n.h2,{id:"import-svg",children:"Import SVG"}),"\n",(0,t.jsx)(n.p,{children:"Import SVG files into the canvas with various processing options."}),"\n",(0,t.jsx)(n.h3,{id:"basic-import",children:"Basic Import"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Usage:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:'"Import SVG"'})," button"]}),"\n",(0,t.jsx)(n.li,{children:"Select an SVG file from file picker"}),"\n",(0,t.jsx)(n.li,{children:"Canvas is replaced with imported content (default behavior)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Behavior:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Parses SVG file using ",(0,t.jsx)(n.code,{children:"importSVGWithDimensions()"})]}),"\n",(0,t.jsxs)(n.li,{children:["Converts ",(0,t.jsx)(n.code,{children:"<path>"}),", ",(0,t.jsx)(n.code,{children:"<rect>"}),", ",(0,t.jsx)(n.code,{children:"<circle>"}),", ",(0,t.jsx)(n.code,{children:"<ellipse>"}),", ",(0,t.jsx)(n.code,{children:"<line>"}),", ",(0,t.jsx)(n.code,{children:"<polygon>"}),", ",(0,t.jsx)(n.code,{children:"<polyline>"})," to canvas paths"]}),"\n",(0,t.jsxs)(n.li,{children:["Preserves ",(0,t.jsx)(n.code,{children:"<g>"})," groups as canvas groups with hierarchy"]}),"\n",(0,t.jsx)(n.li,{children:"Extracts SVG dimensions (width/height/viewBox) for proper scaling"}),"\n",(0,t.jsx)(n.li,{children:"Clears existing canvas elements (unless Append Mode enabled)"}),"\n",(0,t.jsx)(n.li,{children:"Selects imported elements after import"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"import-options",children:"Import Options"}),"\n",(0,t.jsx)(n.h4,{id:"append-mode",children:"Append Mode"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Toggle"}),": ",(0,t.jsx)(n.code,{children:"appendMode"})," (default: ",(0,t.jsx)(n.code,{children:"false"}),")"]}),"\n",(0,t.jsxs)(n.p,{children:["When enabled, imported SVG elements are ",(0,t.jsx)(n.strong,{children:"added"})," to existing canvas instead of replacing it."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"if (!appendMode) {\n  // Clear existing elements\n  clearCanvas();\n}\n\n// Add imported elements\naddImportedElementsToCanvas(elements, addElement, updateElement);\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Use cases:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Combine multiple SVG files"}),"\n",(0,t.jsx)(n.li,{children:"Import icons/assets into existing design"}),"\n",(0,t.jsx)(n.li,{children:"Build complex compositions from separate files"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h4,{id:"add-frame",children:"Add Frame"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Toggle"}),": ",(0,t.jsx)(n.code,{children:"addFrame"})," (default: ",(0,t.jsx)(n.code,{children:"false"}),")"]}),"\n",(0,t.jsxs)(n.p,{children:["Automatically creates a ",(0,t.jsx)(n.strong,{children:"background rectangle"})," matching SVG dimensions."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"if (addFrame) {\n  const frameId = addElement({\n    type: 'path',\n    data: {\n      subPaths: [[\n        { type: 'M', points: [0, 0] },\n        { type: 'L', points: [width, 0] },\n        { type: 'L', points: [width, height] },\n        { type: 'L', points: [0, height] },\n        { type: 'Z', points: [] },\n      ]],\n      fillColor: '#ffffff',\n      strokeColor: 'none',\n      strokeWidth: 0,\n    },\n  });\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Use cases:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Create artboard/canvas boundary"}),"\n",(0,t.jsx)(n.li,{children:"Add white background for transparent SVGs"}),"\n",(0,t.jsx)(n.li,{children:"Export with visible bounds"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h4,{id:"apply-union",children:"Apply Union"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Toggle"}),": ",(0,t.jsx)(n.code,{children:"applyUnion"})," (default: ",(0,t.jsx)(n.code,{children:"false"}),")"]}),"\n",(0,t.jsxs)(n.p,{children:["Applies ",(0,t.jsx)(n.strong,{children:"Boolean Union"})," operation to merge all imported paths into a single path."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"if (applyUnion && elements.length > 1) {\n  const unionPath = performPathUnion(elements);\n  // Replace all elements with single merged path\n  addElement({ type: 'path', data: unionPath });\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Algorithm"}),": Uses polygon clipping library (e.g., ",(0,t.jsx)(n.code,{children:"polygon-clipping"}),")"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Use cases:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Simplify complex SVGs with many overlapping paths"}),"\n",(0,t.jsx)(n.li,{children:"Create compound shapes"}),"\n",(0,t.jsx)(n.li,{children:"Reduce element count for performance"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note"}),": Only works with closed paths (shapes), not open paths (lines)."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h4,{id:"resize-import",children:"Resize Import"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Toggle"}),": ",(0,t.jsx)(n.code,{children:"resizeImport"})," (default: ",(0,t.jsx)(n.code,{children:"false"}),")",(0,t.jsx)(n.br,{}),"\n",(0,t.jsx)(n.strong,{children:"Dimensions"}),": ",(0,t.jsx)(n.code,{children:"resizeWidth"})," (default: 64), ",(0,t.jsx)(n.code,{children:"resizeHeight"})," (default: 64)"]}),"\n",(0,t.jsxs)(n.p,{children:["Scales imported SVG to fit specified dimensions while ",(0,t.jsx)(n.strong,{children:"preserving aspect ratio"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"if (resizeImport) {\n  const scale = Math.min(resizeWidth / svgWidth, resizeHeight / svgHeight);\n  \n  // Transform all path commands\n  elements = mapImportedElements(elements, (pathData) => ({\n    ...pathData,\n    subPaths: pathData.subPaths.map(subPath => \n      transformCommands(subPath, { scaleX: scale, scaleY: scale })\n    ),\n    strokeWidth: calculateScaledStrokeWidth(pathData.strokeWidth, scale),\n  }));\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Aspect ratio"}),": Scales uniformly (no distortion)"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Stroke width"}),": Automatically adjusted to maintain visual appearance"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Use cases:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Import icons at consistent size"}),"\n",(0,t.jsx)(n.li,{children:"Scale artwork to fit canvas"}),"\n",(0,t.jsx)(n.li,{children:"Create thumbnail previews"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"import-flow",children:"Import Flow"}),"\n",(0,t.jsx)(n.mermaid,{value:'sequenceDiagram\n    participant User\n    participant FilePanel\n    participant Parser as SVG Parser\n    participant Canvas as Canvas Store\n    \n    User->>FilePanel: Click "Import SVG"\n    FilePanel->>FilePanel: Open file picker\n    User->>FilePanel: Select SVG file\n    FilePanel->>Parser: Parse SVG file\n    Parser->>Parser: Extract paths, groups, attributes\n    Parser->>FilePanel: Return ImportedElement[]\n    \n    alt Append Mode = false\n        FilePanel->>Canvas: Clear existing elements\n    end\n    \n    alt Resize Import = true\n        FilePanel->>FilePanel: Scale elements to target size\n    end\n    \n    alt Add Frame = true\n        FilePanel->>Canvas: Add background rectangle\n    end\n    \n    alt Apply Union = true\n        FilePanel->>FilePanel: Merge all paths (Boolean Union)\n    end\n    \n    FilePanel->>Canvas: Add imported elements\n    Canvas->>Canvas: Generate IDs, assign Z-indices\n    FilePanel->>Canvas: Select imported elements\n    Canvas->>User: Display imported content'}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"export-svg",children:"Export SVG"}),"\n",(0,t.jsx)(n.p,{children:"Export canvas to SVG file format."}),"\n",(0,t.jsx)(n.h3,{id:"basic-export",children:"Basic Export"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Usage:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:'"Export SVG"'})," button"]}),"\n",(0,t.jsxs)(n.li,{children:["File is automatically downloaded as ",(0,t.jsx)(n.code,{children:"{documentName}.svg"})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Behavior:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Serializes canvas elements to SVG XML"}),"\n",(0,t.jsx)(n.li,{children:"Preserves paths, groups, transforms, styles"}),"\n",(0,t.jsx)(n.li,{children:"Generates clean SVG code (no inline styles, uses attributes)"}),"\n",(0,t.jsxs)(n.li,{children:["Includes ",(0,t.jsx)(n.code,{children:"viewBox"})," calculated from element bounds"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"export-options",children:"Export Options"}),"\n",(0,t.jsx)(n.h4,{id:"selected-only",children:"Selected Only"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Toggle"}),": ",(0,t.jsx)(n.code,{children:"svgSelectedOnly"})," (default: ",(0,t.jsx)(n.code,{children:"false"}),")"]}),"\n",(0,t.jsx)(n.p,{children:"Export only selected elements instead of entire canvas."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const elementsToExport = svgSelectedOnly \n  ? elements.filter(el => selectedIds.includes(el.id))\n  : elements;\n\nconst svgContent = saveAsSvg(elementsToExport);\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Use cases:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Export specific elements as separate files"}),"\n",(0,t.jsx)(n.li,{children:"Extract portions of design"}),"\n",(0,t.jsx)(n.li,{children:"Create component library"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"svg-output-format",children:"SVG Output Format"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<svg xmlns="http://www.w3.org/2000/svg" \n     width="800" height="600" \n     viewBox="0 0 800 600">\n  <g id="group-1" data-name="My Group">\n    <path d="M 0 0 L 100 0 L 100 100 L 0 100 Z"\n          fill="#ff0000"\n          stroke="#000000"\n          stroke-width="2" />\n  </g>\n</svg>\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Features:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Clean attribute-based styling (no inline styles)"}),"\n",(0,t.jsxs)(n.li,{children:["Preserves group hierarchy with ",(0,t.jsx)(n.code,{children:"<g>"})," elements"]}),"\n",(0,t.jsxs)(n.li,{children:["Group names stored in ",(0,t.jsx)(n.code,{children:"data-name"})," attribute"]}),"\n",(0,t.jsx)(n.li,{children:"Transform matrices applied to paths (flattened)"}),"\n",(0,t.jsx)(n.li,{children:"Optimized path data (removes redundant commands)"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"export-png",children:"Export PNG"}),"\n",(0,t.jsx)(n.p,{children:"Render canvas to PNG image file."}),"\n",(0,t.jsx)(n.h3,{id:"basic-export-1",children:"Basic Export"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Usage:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Set PNG dimensions (width/height)"}),"\n",(0,t.jsx)(n.li,{children:'Toggle "Selected Only" if desired'}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:'"Export PNG"'})," button"]}),"\n",(0,t.jsxs)(n.li,{children:["Image is downloaded as ",(0,t.jsx)(n.code,{children:"{documentName}.png"})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Behavior:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Renders canvas to offscreen Canvas element"}),"\n",(0,t.jsxs)(n.li,{children:["Converts to PNG using ",(0,t.jsx)(n.code,{children:"canvas.toDataURL('image/png')"})]}),"\n",(0,t.jsx)(n.li,{children:"Triggers browser download"}),"\n",(0,t.jsx)(n.li,{children:"Preserves transparency (alpha channel)"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"png-options",children:"PNG Options"}),"\n",(0,t.jsx)(n.h4,{id:"dimensions",children:"Dimensions"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Inputs"}),": ",(0,t.jsx)(n.code,{children:"pngWidth"})," (default: viewport width), ",(0,t.jsx)(n.code,{children:"pngHeight"})," (default: viewport height)"]}),"\n",(0,t.jsx)(n.p,{children:"Specify output image dimensions in pixels."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const canvas = document.createElement('canvas');\ncanvas.width = pngWidth;\ncanvas.height = pngHeight;\n\nconst ctx = canvas.getContext('2d');\nrenderElementsToContext(ctx, elements, { scale: pngWidth / canvasWidth });\n\nconst dataUrl = canvas.toDataURL('image/png');\ndownloadFile(dataUrl, `${documentName}.png`);\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Scaling"}),": Elements are scaled to fit specified dimensions"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Quality"}),": Full resolution (no compression)"]}),"\n",(0,t.jsx)(n.h4,{id:"selected-only-1",children:"Selected Only"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Toggle"}),": ",(0,t.jsx)(n.code,{children:"pngSelectedOnly"})," (default: ",(0,t.jsx)(n.code,{children:"true"}),")"]}),"\n",(0,t.jsx)(n.p,{children:"Export only selected elements (with transparent background)."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Use cases:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Export individual elements as PNG assets"}),"\n",(0,t.jsx)(n.li,{children:"Create image thumbnails"}),"\n",(0,t.jsx)(n.li,{children:"Generate sprite sheets"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"saveload-project",children:"Save/Load Project"}),"\n",(0,t.jsx)(n.p,{children:"Serialize and restore entire canvas state."}),"\n",(0,t.jsx)(n.h3,{id:"save-project",children:"Save Project"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Usage:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Set document name (optional)"}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:'"Save Project"'})," button"]}),"\n",(0,t.jsxs)(n.li,{children:["File is downloaded as ",(0,t.jsx)(n.code,{children:"{documentName}.json"})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Saved Data:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "version": "1.0",\n  "documentName": "My Project",\n  "elements": [\n    {\n      "id": "path-1",\n      "type": "path",\n      "zIndex": 0,\n      "data": {\n        "subPaths": [[...]],\n        "fillColor": "#ff0000",\n        "strokeColor": "#000000",\n        "strokeWidth": 2\n      }\n    }\n  ],\n  "viewport": {\n    "offsetX": 0,\n    "offsetY": 0,\n    "zoom": 1\n  },\n  "grid": {\n    "enabled": true,\n    "spacing": 20,\n    "subdivisions": 5\n  },\n  "settings": {\n    "defaultStrokeColor": "#000000",\n    "defaultFillColor": "none"\n  }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Includes:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"All canvas elements (paths, groups, with full data)"}),"\n",(0,t.jsx)(n.li,{children:"Viewport state (pan, zoom)"}),"\n",(0,t.jsx)(n.li,{children:"Grid configuration"}),"\n",(0,t.jsx)(n.li,{children:"App settings"}),"\n",(0,t.jsx)(n.li,{children:"Document metadata"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"load-project",children:"Load Project"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Usage:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:'"Load Project"'})," button"]}),"\n",(0,t.jsxs)(n.li,{children:["Select a ",(0,t.jsx)(n.code,{children:".json"})," file"]}),"\n",(0,t.jsx)(n.li,{children:"Canvas is replaced with loaded project"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Behavior:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Parses JSON file"}),"\n",(0,t.jsx)(n.li,{children:"Validates schema version"}),"\n",(0,t.jsx)(n.li,{children:"Restores all elements with IDs"}),"\n",(0,t.jsx)(n.li,{children:"Restores viewport, grid, settings"}),"\n",(0,t.jsx)(n.li,{children:"Clears existing canvas"}),"\n",(0,t.jsx)(n.li,{children:"Clears undo/redo history (fresh start)"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Error Handling:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Invalid JSON \u2192 Show error toast"}),"\n",(0,t.jsx)(n.li,{children:"Missing required fields \u2192 Show error toast"}),"\n",(0,t.jsx)(n.li,{children:"Version mismatch \u2192 Attempt migration or show warning"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"document-name",children:"Document Name"}),"\n",(0,t.jsx)(n.p,{children:"The document name is used as the default filename for exports."}),"\n",(0,t.jsx)(n.h3,{id:"usage",children:"Usage"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Input"}),": Text input at top of File Panel"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'<Input\n  value={localDocumentName}\n  onChange={(e) => setLocalDocumentName(e.target.value)}\n  onBlur={handleSaveDocumentName}\n  placeholder="Untitled Document"\n  size="sm"\n/>\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Behavior:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Changes are saved to Canvas Store on blur (debounced)"}),"\n",(0,t.jsxs)(n.li,{children:["Used in export filenames: ",(0,t.jsx)(n.code,{children:"{documentName}.svg"}),", ",(0,t.jsx)(n.code,{children:"{documentName}.png"}),", ",(0,t.jsx)(n.code,{children:"{documentName}.json"})]}),"\n",(0,t.jsx)(n.li,{children:"Persists across sessions (stored in Canvas Store persistence)"}),"\n",(0,t.jsx)(n.li,{children:'Default: "Untitled Document"'}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Auto-save indicator:"})}),"\n",(0,t.jsx)(n.p,{children:'Shows "Saving..." feedback briefly after edits.'}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"panel-layout",children:"Panel Layout"}),"\n",(0,t.jsx)(n.p,{children:"The File Panel uses collapsible sections for better organization:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'<Panel title="File" icon={<FolderOpen />}>\n  {/* Document Name */}\n  <FormControl>\n    <FormLabel>Document Name</FormLabel>\n    <Input value={documentName} onChange={setDocumentName} />\n  </FormControl>\n\n  {/* Import Section */}\n  <VStack spacing={2}>\n    <PanelStyledButton onClick={handleImportSVG}>\n      Import SVG\n    </PanelStyledButton>\n    \n    {/* Advanced Options (Collapsible) */}\n    <Collapse in={isAdvancedOpen}>\n      <VStack spacing={2}>\n        <PanelToggle value={appendMode} onChange={setAppendMode}>\n          Append Mode\n        </PanelToggle>\n        <PanelToggle value={addFrame} onChange={setAddFrame}>\n          Add Frame\n        </PanelToggle>\n        <PanelToggle value={applyUnion} onChange={setApplyUnion}>\n          Apply Union\n        </PanelToggle>\n        <PanelToggle value={resizeImport} onChange={setResizeImport}>\n          Resize Import\n        </PanelToggle>\n        {resizeImport && (\n          <HStack>\n            <NumberInput value={resizeWidth} onChange={setResizeWidth} />\n            <NumberInput value={resizeHeight} onChange={setResizeHeight} />\n          </HStack>\n        )}\n      </VStack>\n    </Collapse>\n    \n    <IconButton \n      icon={isAdvancedOpen ? <ChevronUp /> : <ChevronDown />}\n      onClick={onAdvancedToggle}\n      aria-label="Toggle Advanced Options"\n    />\n  </VStack>\n\n  {/* Export Section */}\n  <VStack spacing={2}>\n    <PanelStyledButton onClick={handleExportSVG}>\n      Export SVG\n    </PanelStyledButton>\n    <PanelToggle value={svgSelectedOnly} onChange={setSvgSelectedOnly}>\n      Selected Only\n    </PanelToggle>\n    \n    <PanelStyledButton onClick={handleExportPNG}>\n      Export PNG\n    </PanelStyledButton>\n    <HStack>\n      <NumberInput value={pngWidth} onChange={setPngWidth} />\n      <NumberInput value={pngHeight} onChange={setPngHeight} />\n    </HStack>\n    <PanelToggle value={pngSelectedOnly} onChange={setPngSelectedOnly}>\n      Selected Only\n    </PanelToggle>\n  </VStack>\n\n  {/* Project Management */}\n  <VStack spacing={2}>\n    <PanelStyledButton onClick={handleSaveProject}>\n      Save Project\n    </PanelStyledButton>\n    <PanelStyledButton onClick={handleLoadProject}>\n      Load Project\n    </PanelStyledButton>\n  </VStack>\n</Panel>\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"integration-with-canvas-store",children:"Integration with Canvas Store"}),"\n",(0,t.jsx)(n.p,{children:"File Panel operations modify Canvas Store state:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Import SVG\nconst addElement = useCanvasStore(state => state.addElement);\nconst updateElement = useCanvasStore(state => state.updateElement);\nconst selectElements = useCanvasStore(state => state.selectElements);\n\n// Export\nconst saveAsSvg = useCanvasStore(state => state.saveAsSvg);\nconst saveDocument = useCanvasStore(state => state.saveDocument);\n\n// Project management\nconst loadDocument = useCanvasStore(state => state.loadDocument);\nconst setDocumentName = useCanvasStore(state => state.setDocumentName);\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"file-formats",children:"File Formats"}),"\n",(0,t.jsx)(n.h3,{id:"supported-import-formats",children:"Supported Import Formats"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"SVG"}),": Full SVG 1.1 support (paths, shapes, groups, transforms, styles)"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"supported-export-formats",children:"Supported Export Formats"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"SVG"}),": Clean, optimized SVG XML"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"PNG"}),": Raster image with transparency"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"JSON"}),": TTPE project format (full state serialization)"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/ttpe/docs/docs/app-structure/sidebar",children:"Sidebar"})," - Sidebar container and navigation"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"../api/canvas-store",children:"Canvas Store"})," - State management API"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/ttpe/docs/docs/features/persistence",children:"Persistence"})," - Project save/load"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(n.h3,{id:"for-users",children:"For Users"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Save frequently"}),": Use Save Project to preserve work"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Name your document"}),": Set meaningful document names for exports"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Test import options"}),": Preview with different options before committing"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Export selected only"}),": Extract specific elements for reuse"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Use resize import"}),": Maintain consistent sizes for icons/assets"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"for-developers",children:"For Developers"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Validate imported SVG"}),": Check for malformed paths or invalid attributes"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Handle errors gracefully"}),": Show user-friendly error messages"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Optimize exports"}),": Remove unnecessary attributes/metadata"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Preserve metadata"}),": Keep group names and structure"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Test edge cases"}),": Empty canvas, single element, large files"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"future-enhancements",children:"Future Enhancements"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"PDF Export"}),": Export canvas to PDF format"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Batch Import"}),": Import multiple SVG files at once"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Cloud Storage"}),": Save/load projects from cloud services"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Version Control"}),": Track project history and revisions"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Import Preview"}),": Show preview before importing"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Export Presets"}),": Save export settings as presets"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Auto-save"}),": Automatically save projects periodically"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>a});var l=s(6540);const t={},i=l.createContext(t);function r(e){const n=l.useContext(i);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),l.createElement(i.Provider,{value:n},e.children)}}}]);