"use strict";(self.webpackChunkttpe_docs=self.webpackChunkttpe_docs||[]).push([[3679],{3425:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"app-structure/actionbars","title":"Action Bars","description":"TTPE features two floating action bars that provide quick access to tools, actions, and canvas operations. These bars are non-intrusive overlays positioned at the top and bottom of the canvas, adapting to sidebar state and screen size.","source":"@site/docs/app-structure/actionbars.md","sourceDirName":"app-structure","slug":"/app-structure/actionbars","permalink":"/ttpe/docs/app-structure/actionbars","draft":false,"unlisted":false,"editUrl":"https://github.com/ekrsulov/ttpe/tree/main/doc/docs/app-structure/actionbars.md","tags":[],"version":"current","lastUpdatedBy":"Ernesto Krsulovic","lastUpdatedAt":1762144179000,"frontMatter":{"id":"actionbars","title":"Action Bars","sidebar_label":"Action Bars"},"sidebar":"docs","previous":{"title":"Canvas","permalink":"/ttpe/docs/app-structure/canvas"},"next":{"title":"Sidebar","permalink":"/ttpe/docs/app-structure/sidebar"}}');var o=s(4848),t=s(8453);const r={id:"actionbars",title:"Action Bars",sidebar_label:"Action Bars"},l="Action Bars",d={},a=[{value:"Overview",id:"overview",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Top Action Bar",id:"top-action-bar",level:2},{value:"Components",id:"components",level:3},{value:"Tool Selection Buttons",id:"tool-selection-buttons",level:4},{value:"Zoom Level Display",id:"zoom-level-display",level:4},{value:"Grid Toggle Button",id:"grid-toggle-button",level:4},{value:"Mobile Menu Button",id:"mobile-menu-button",level:4},{value:"Props",id:"props",level:3},{value:"Positioning",id:"positioning",level:3},{value:"Styling",id:"styling",level:3},{value:"Bottom Action Bar",id:"bottom-action-bar",level:2},{value:"Components",id:"components-1",level:3},{value:"Undo/Redo Buttons",id:"undoredo-buttons",level:4},{value:"Zoom Controls",id:"zoom-controls",level:4},{value:"Delete Button",id:"delete-button",level:4},{value:"Props",id:"props-1",level:3},{value:"Positioning",id:"positioning-1",level:3},{value:"Styling",id:"styling-1",level:3},{value:"Responsive Behavior",id:"responsive-behavior",level:2},{value:"Breakpoints (from theme)",id:"breakpoints-from-theme",level:3},{value:"Positioning Behavior",id:"positioning-behavior",level:3},{value:"Spacing Values",id:"spacing-values",level:3},{value:"Button Visibility",id:"button-visibility",level:3},{value:"Tooltip Behavior",id:"tooltip-behavior",level:3},{value:"Integration with Canvas Store",id:"integration-with-canvas-store",level:2},{value:"Accessibility",id:"accessibility",level:2},{value:"Keyboard Navigation",id:"keyboard-navigation",level:3},{value:"ARIA Attributes",id:"aria-attributes",level:3},{value:"Screen Readers",id:"screen-readers",level:3},{value:"Component Files",id:"component-files",level:2},{value:"Usage Example",id:"usage-example",level:2},{value:"Related Documentation",id:"related-documentation",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"For UI Developers",id:"for-ui-developers",level:3},{value:"For Plugin Developers",id:"for-plugin-developers",level:3},{value:"Future Enhancements",id:"future-enhancements",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"action-bars",children:"Action Bars"})}),"\n",(0,o.jsxs)(n.p,{children:["TTPE features two ",(0,o.jsx)(n.strong,{children:"floating action bars"})," that provide quick access to tools, actions, and canvas operations. These bars are ",(0,o.jsx)(n.strong,{children:"non-intrusive overlays"})," positioned at the top and bottom of the canvas, adapting to sidebar state and screen size."]}),"\n",(0,o.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,o.jsxs)(n.p,{children:["The action bars serve as the primary ",(0,o.jsx)(n.strong,{children:"toolbar interface"})," for the application:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Top Action Bar"}),": Mode selection, plugin shortcuts, canvas utilities, mobile menu"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Bottom Action Bar"}),": Undo/redo, zoom controls, viewport operations, element deletion"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["Both action bars are ",(0,o.jsx)(n.strong,{children:"responsive"})," and adjust their position based on sidebar width (when pinned) to avoid overlapping with sidebar content."]}),"\n",(0,o.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,o.jsx)(n.mermaid,{value:"graph TB\n    App[App.tsx] --\x3e TopBar[TopActionBar]\n    App --\x3e BottomBar[BottomActionBar]\n    \n    TopBar --\x3e ToolButtons[Tool Buttons Dynamic]\n    TopBar --\x3e MenuButton[Menu Button]\n    \n    BottomBar --\x3e UndoRedo[Undo/Redo]\n    BottomBar --\x3e ZoomControls[Zoom Controls]\n    BottomBar --\x3e DeleteButton[Delete Button]\n    BottomBar --\x3e PluginActions[Plugin Actions Optional]\n    \n    ToolButtons --\x3e PluginManager[Plugin Manager]\n    PluginManager --\x3e RegisteredTools[getRegisteredTools]\n    RegisteredTools --\x3e ToolDefs[TOOL_DEFINITIONS]\n    \n    ToolDefs --\x3e Select[Select]\n    ToolDefs --\x3e Subpath[Subpath]\n    ToolDefs --\x3e Transform[Transform]\n    ToolDefs --\x3e Edit[Edit]\n    ToolDefs --\x3e Pan[Pan]\n    ToolDefs --\x3e Pencil[Pencil]\n    ToolDefs --\x3e Curves[Curves]\n    ToolDefs --\x3e Text[Text]\n    ToolDefs --\x3e Shape[Shape]\n    ToolDefs --\x3e GridFill[Grid Fill conditional]"}),"\n",(0,o.jsx)(n.h2,{id:"top-action-bar",children:"Top Action Bar"}),"\n",(0,o.jsxs)(n.p,{children:["The Top Action Bar (",(0,o.jsx)(n.code,{children:"/src/ui/TopActionBar.tsx"}),") provides ",(0,o.jsx)(n.strong,{children:"mode/plugin selection"})," and ",(0,o.jsx)(n.strong,{children:"canvas utilities"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"components",children:"Components"}),"\n",(0,o.jsx)(n.h4,{id:"tool-selection-buttons",children:"Tool Selection Buttons"}),"\n",(0,o.jsxs)(n.p,{children:["Icon buttons for switching between editor tools. Tools are defined in ",(0,o.jsx)(n.code,{children:"/src/config/toolDefinitions.ts"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"// From toolDefinitions.ts\nexport const TOOL_DEFINITIONS = [\n  { mode: 'select', label: 'Select', icon: MousePointer, cursor: 'default', order: 1 },\n  { mode: 'subpath', label: 'Subpath', icon: Route, cursor: 'pointer', order: 2 },\n  { mode: 'transformation', label: 'Transform', icon: SquareDashedMousePointer, cursor: 'move', order: 3 },\n  { mode: 'edit', label: 'Edit', icon: MousePointerClick, cursor: 'pointer', order: 4 },\n  { mode: 'pan', label: 'Pan', icon: Hand, cursor: 'grab', order: 5 },\n  { mode: 'pencil', label: 'Pencil', icon: Pen, cursor: 'crosshair', order: 6 },\n  { mode: 'curves', label: 'Curves', icon: PenTool, cursor: 'crosshair', order: 7 },\n  { mode: 'text', label: 'Text', icon: Type, cursor: 'text', order: 8 },\n  { mode: 'shape', label: 'Shape', icon: Shapes, cursor: 'crosshair', order: 9 },\n  { mode: 'gridFill', label: 'Grid Fill', icon: PaintBucket, cursor: 'crosshair', order: 10 },\n];\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Tool Rendering:"})}),"\n",(0,o.jsxs)(n.p,{children:["The Top Action Bar dynamically renders buttons based on ",(0,o.jsx)(n.strong,{children:"registered plugins"})," from the Plugin Manager, using tool definitions for metadata (icon, label, cursor, order)."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"const registeredTools = pluginManager\n  .getRegisteredTools()\n  .filter((plugin) => TOOL_DEFINITION_MAP.has(plugin.id as ToolMode))\n  .filter((plugin) => {\n    // Only show gridFill if grid is enabled\n    if (plugin.id === 'gridFill') {\n      return gridEnabled;\n    }\n    return true;\n  })\n  .map((plugin) => {\n    const fallbackDefinition = TOOL_DEFINITION_MAP.get(plugin.id as ToolMode);\n    return {\n      id: plugin.id,\n      label: plugin.metadata.label ?? fallbackDefinition?.label,\n      icon: plugin.metadata.icon ?? fallbackDefinition?.icon,\n      order: fallbackDefinition?.order ?? 999,\n    };\n  })\n  .sort((a, b) => a.order - b.order);\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Behavior:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Active tool highlighted"}),": Button shows active state with animated background transition"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Keyboard shortcuts"}),': Display shortcuts in tooltips (e.g., "V" for Select)']}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Counter badges"}),": Some tools show counters (e.g., selected element count for Select tool)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Dynamic visibility"}),": Grid Fill tool only appears when grid is enabled"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Plugin integration"}),": Tools registered via Plugin Manager appear automatically"]}),"\n"]}),"\n",(0,o.jsx)(n.h4,{id:"zoom-level-display",children:"Zoom Level Display"}),"\n",(0,o.jsx)(n.p,{children:"Shows current viewport zoom as percentage:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:'<Text fontSize="sm" fontWeight="medium" color="gray.600">\n  {Math.round(viewport.zoom * 100)}%\n</Text>\n'})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Read-only display"}),": Shows zoom level, not interactive"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Updates live"}),": Changes as user zooms with wheel/pinch"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Range"}),": 10% to 1000%"]}),"\n"]}),"\n",(0,o.jsx)(n.h4,{id:"grid-toggle-button",children:"Grid Toggle Button"}),"\n",(0,o.jsx)(n.p,{children:"Toggle for showing/hiding grid:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:"<ToolbarIconButton\n  icon={Grid3x3}\n  label=\"Toggle Grid\"\n  onClick={toggleGrid}\n  variant={grid?.enabled ? 'solid' : 'ghost'}\n  colorScheme={grid?.enabled ? 'blue' : 'gray'}\n/>\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Visual state"}),": Shows active state when grid enabled"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Shortcut"}),": ",(0,o.jsx)(n.code,{children:"G"})," key"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Triggers Grid Plugin"}),": Activates/deactivates grid rendering"]}),"\n"]}),"\n",(0,o.jsx)(n.h4,{id:"mobile-menu-button",children:"Mobile Menu Button"}),"\n",(0,o.jsx)(n.p,{children:"Hamburger menu for opening sidebar on small screens:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:'{!isSidebarOpen && (\n  <ToolbarIconButton\n    icon={Menu}\n    label="Open Menu"\n    onClick={onMenuClick}\n    showTooltip={false}\n  />\n)}\n'})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Visibility"}),": Only shown when sidebar is closed and screen is narrow"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Action"}),": Opens sidebar drawer"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Responsive"}),": Hidden on desktop when sidebar is pinned"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"props",children:"Props"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"interface TopActionBarProps {\n  activeMode: string;                  // Current active plugin/mode\n  onModeChange: (mode: string) => void; // Mode change handler\n  sidebarWidth: number;                 // Width of pinned sidebar (0 if not pinned)\n  isSidebarPinned: boolean;            // Whether sidebar is pinned\n  isSidebarOpen: boolean;              // Whether sidebar is open (mobile)\n  onMenuClick: () => void;             // Handler for mobile menu button\n  selectedPaths: CanvasElement[];      // Currently selected path elements\n  showGridRulers: boolean;             // Whether grid rulers are visible\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"positioning",children:"Positioning"}),"\n",(0,o.jsxs)(n.p,{children:["The Top Action Bar uses ",(0,o.jsx)(n.strong,{children:"dynamic positioning"})," to adapt to sidebar state:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:"const leftPosition = isSidebarPinned \n  ? `${sidebarWidth + 16}px`  // Offset by sidebar width + padding\n  : '16px';                    // Fixed left padding\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Responsive behavior:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Desktop (sidebar pinned)"}),": Positioned to the right of sidebar"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Desktop (sidebar unpinned)"}),": Positioned at left edge of viewport"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Mobile"}),": Centered horizontally, includes menu button"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"styling",children:"Styling"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-css",children:"position: absolute;\ntop: 16px;\nleft: {leftPosition};\nz-index: 999;\nbackground: rgba(255, 255, 255, 0.9);  /* Translucent background */\nbackdrop-filter: blur(10px);            /* Blur effect */\nborder-radius: 12px;\nbox-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"bottom-action-bar",children:"Bottom Action Bar"}),"\n",(0,o.jsxs)(n.p,{children:["The Bottom Action Bar (",(0,o.jsx)(n.code,{children:"/src/ui/BottomActionBar.tsx"}),") provides ",(0,o.jsx)(n.strong,{children:"undo/redo"}),", ",(0,o.jsx)(n.strong,{children:"zoom controls"}),", and ",(0,o.jsx)(n.strong,{children:"element deletion"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"components-1",children:"Components"}),"\n",(0,o.jsx)(n.h4,{id:"undoredo-buttons",children:"Undo/Redo Buttons"}),"\n",(0,o.jsx)(n.p,{children:"Buttons for history navigation:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:'<ToolbarIconButton\n  icon={Undo2}\n  label="Undo"\n  onClick={undo}\n  counter={canUndo ? undoStack.length : 0}\n  isDisabled={!canUndo}\n/>\n\n<ToolbarIconButton\n  icon={Redo2}\n  label="Redo"\n  onClick={redo}\n  counter={canRedo ? redoStack.length : 0}\n  isDisabled={!canRedo}\n/>\n'})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Counter badges"}),": Show number of available undo/redo operations"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Disabled state"}),": Grayed out when no operations available"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Keyboard shortcuts"}),": ",(0,o.jsx)(n.code,{children:"Ctrl/Cmd + Z"})," (undo), ",(0,o.jsx)(n.code,{children:"Ctrl/Cmd + Shift + Z"})," (redo)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Tooltips"}),": Show shortcuts and operation counts"]}),"\n"]}),"\n",(0,o.jsx)(n.h4,{id:"zoom-controls",children:"Zoom Controls"}),"\n",(0,o.jsx)(n.p,{children:"Single section with three zoom buttons:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:'{/* Zoom Group */}\n<HStack spacing={0}>\n  <ToolbarIconButton\n    icon={ZoomOut}\n    label="Zoom Out"\n    onClick={() => zoom(1 / zoomFactor)}\n  />\n\n  <ToolbarIconButton\n    icon={Maximize2}\n    label="Reset Zoom"\n    onClick={() => resetZoom()}\n    counter={isZoomDifferent ? currentZoom : undefined}\n  />\n\n  <ToolbarIconButton\n    icon={ZoomIn}\n    label="Zoom In"\n    onClick={() => zoom(zoomFactor)}\n  />\n</HStack>\n'})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Implementation details:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Zoom factor"}),": ",(0,o.jsx)(n.code,{children:"1.2"})," multiplier per click (zoom in multiplies by 1.2, zoom out divides by 1.2)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Reset Zoom button"}),": Middle button with ",(0,o.jsx)(n.code,{children:"Maximize2"})," icon","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Resets zoom to 100% (",(0,o.jsx)(n.code,{children:"resetZoom()"})," action)"]}),"\n",(0,o.jsx)(n.li,{children:"Shows current zoom percentage as counter badge when zoom \u2260 100%"}),"\n",(0,o.jsxs)(n.li,{children:["Counter calculated as: ",(0,o.jsx)(n.code,{children:"Math.round(viewport.zoom * 100)"})]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"No disabled states"}),": All three buttons are always enabled"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"No min/max enforced in UI"}),": Zoom limits handled by Canvas Store"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Keyboard shortcuts"}),":","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"Ctrl/Cmd + Plus"})," (zoom in)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"Ctrl/Cmd + Minus"})," (zoom out)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"Ctrl/Cmd + 0"})," (reset zoom)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h4,{id:"delete-button",children:"Delete Button"}),"\n",(0,o.jsx)(n.p,{children:"Button for deleting selected elements:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:'<ToolbarIconButton\n  icon={Trash2}\n  label="Delete"\n  onClick={deleteSelected}\n  counter={selectedIds.length}\n  counterColor="red"\n  isDisabled={selectedIds.length === 0}\n/>\n'})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Counter badge"}),": Shows number of selected elements (red color)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Disabled state"}),": Grayed out when nothing selected"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Keyboard shortcut"}),": ",(0,o.jsx)(n.code,{children:"Delete"})," or ",(0,o.jsx)(n.code,{children:"Backspace"})," key"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Confirmation"}),": No confirmation dialog (undo available)"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"props-1",children:"Props"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"interface BottomActionBarProps {\n  sidebarWidth: number;  // Width of pinned sidebar (0 if not pinned)\n}\n"})}),"\n",(0,o.jsxs)(n.p,{children:["The Bottom Action Bar ",(0,o.jsx)(n.strong,{children:"subscribes directly to Canvas Store"})," for undo/redo/viewport state, requiring minimal props."]}),"\n",(0,o.jsx)(n.h3,{id:"positioning-1",children:"Positioning"}),"\n",(0,o.jsx)(n.p,{children:"Similar to Top Action Bar, positions dynamically based on sidebar:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:"const leftPosition = sidebarWidth > 0 \n  ? `${sidebarWidth + 16}px` \n  : '16px';\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-css",children:"position: absolute;\nbottom: 16px;\nleft: {leftPosition};\nz-index: 999;\n"})}),"\n",(0,o.jsx)(n.h3,{id:"styling-1",children:"Styling"}),"\n",(0,o.jsx)(n.p,{children:"Same translucent overlay style as Top Action Bar:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-css",children:"background: rgba(255, 255, 255, 0.9);\nbackdrop-filter: blur(10px);\nborder-radius: 12px;\nbox-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\npadding: 8px;\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"responsive-behavior",children:"Responsive Behavior"}),"\n",(0,o.jsxs)(n.p,{children:["Both action bars use ",(0,o.jsx)(n.strong,{children:"Chakra UI responsive props"})," with consistent breakpoints:"]}),"\n",(0,o.jsx)(n.h3,{id:"breakpoints-from-theme",children:"Breakpoints (from theme)"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"breakpoints: {\n  base: '0em',    // 0px - Mobile\n  sm: '30em',     // ~480px - Large mobile\n  md: '48em',     // ~768px - Tablet\n  lg: '64em',     // ~1024px - Desktop\n  xl: '80em',     // ~1280px - Large desktop\n  '2xl': '96em',  // ~1536px - Extra large\n}\n"})}),"\n",(0,o.jsx)(n.h3,{id:"positioning-behavior",children:"Positioning Behavior"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Both Top and Bottom Action Bars:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Pinned Sidebar"})," (",(0,o.jsx)(n.code,{children:"sidebarWidth > 0"}),"):"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"left: 0"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"right: {sidebarWidth}px"})}),"\n",(0,o.jsx)(n.li,{children:"Toolbar fills space between left edge and sidebar"}),"\n",(0,o.jsxs)(n.li,{children:["Responsive spacing via ",(0,o.jsx)(n.code,{children:"top"})," or ",(0,o.jsx)(n.code,{children:"bottom"})," with ",(0,o.jsx)(n.code,{children:"{ base: X, md: Y }"})," values"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Unpinned Sidebar"})," (",(0,o.jsx)(n.code,{children:"sidebarWidth === 0"}),"):"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"left: 50%"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"transform: translateX(-50%)"})}),"\n",(0,o.jsx)(n.li,{children:"Toolbar centered horizontally"}),"\n",(0,o.jsxs)(n.li,{children:["Responsive spacing via ",(0,o.jsx)(n.code,{children:"top"})," or ",(0,o.jsx)(n.code,{children:"bottom"})," with ",(0,o.jsx)(n.code,{children:"{ base: X, md: Y }"})," values"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"spacing-values",children:"Spacing Values"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Top Action Bar:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Without grid rulers: ",(0,o.jsx)(n.code,{children:"top: { base: 2, md: 6 }"})," (8px mobile, 24px desktop)"]}),"\n",(0,o.jsxs)(n.li,{children:["With grid rulers: ",(0,o.jsx)(n.code,{children:"top: { base: 6, md: 10 }"})," (24px mobile, 40px desktop)"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Bottom Action Bar:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"bottom: { base: 2, md: 5 }"})," (8px mobile, 20px desktop)"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"button-visibility",children:"Button Visibility"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Top Action Bar:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"All tool buttons"})," always render (no responsive hiding)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Menu button"})," shows when ",(0,o.jsx)(n.code,{children:"!isSidebarPinned"})," (drawer mode)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Grid Fill tool"})," conditionally shows based on ",(0,o.jsx)(n.code,{children:"grid.enabled"})," state"]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Bottom Action Bar:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"All controls"})," always render (no responsive hiding)"]}),"\n",(0,o.jsx)(n.li,{children:"Undo/Redo, Zoom (3 buttons), Delete always visible"}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Plugin actions"})," can optionally replace default controls via ",(0,o.jsx)(n.code,{children:"pluginManager.getActions('bottom')"})]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"tooltip-behavior",children:"Tooltip Behavior"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"ConditionalTooltip"})," (used by ToolbarIconButton):"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Mobile"})," (",(0,o.jsx)(n.code,{children:"< 768px"}),"): Tooltips disabled"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Desktop"})," (",(0,o.jsx)(n.code,{children:">= 768px"}),"): Tooltips enabled on hover"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Note:"})," There is ",(0,o.jsx)(n.strong,{children:"no toolbar wrapping, button hiding, or layout changes"})," across breakpoints. The action bars maintain the same button set at all screen sizes, only adjusting spacing and tooltip behavior."]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"integration-with-canvas-store",children:"Integration with Canvas Store"}),"\n",(0,o.jsxs)(n.p,{children:["Action bars ",(0,o.jsx)(n.strong,{children:"subscribe to Canvas Store"})," state:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"// Top Action Bar subscriptions\nconst activePlugin = useCanvasStore(state => state.activePlugin);\nconst selectedIds = useCanvasStore(state => state.selectedIds);\nconst viewport = useCanvasStore(state => state.viewport);\nconst grid = useCanvasStore(state => state.grid);\n\n// Bottom Action Bar subscriptions\nconst canUndo = useCanvasStore(state => state.canUndo);\nconst canRedo = useCanvasStore(state => state.canRedo);\nconst undo = useCanvasStore(state => state.undo);\nconst redo = useCanvasStore(state => state.redo);\nconst viewport = useCanvasStore(state => state.viewport);\nconst selectedIds = useCanvasStore(state => state.selectedIds);\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"State changes that trigger updates:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Mode changes \u2192 Update active button highlight"}),"\n",(0,o.jsx)(n.li,{children:"Selection changes \u2192 Update counter badges"}),"\n",(0,o.jsx)(n.li,{children:"Viewport changes \u2192 Update zoom display"}),"\n",(0,o.jsx)(n.li,{children:"History changes \u2192 Update undo/redo state"}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"accessibility",children:"Accessibility"}),"\n",(0,o.jsx)(n.p,{children:"Action bars follow accessibility best practices:"}),"\n",(0,o.jsx)(n.h3,{id:"keyboard-navigation",children:"Keyboard Navigation"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Tab order"}),": Logical left-to-right order"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Focus indicators"}),": Clear outline on focused buttons"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Keyboard shortcuts"}),": All actions have keyboard equivalents"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"aria-attributes",children:"ARIA Attributes"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"aria-label"}),": All icon-only buttons have descriptive labels"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"aria-pressed"}),": Toggle buttons indicate pressed state"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"aria-disabled"}),": Disabled buttons announce state to screen readers"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"screen-readers",children:"Screen Readers"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Button labels describe action clearly"}),"\n",(0,o.jsx)(n.li,{children:"Counter badges announced as part of label"}),"\n",(0,o.jsx)(n.li,{children:"Keyboard shortcuts announced in tooltips"}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"component-files",children:"Component Files"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"src/ui/\n\u251c\u2500\u2500 TopActionBar.tsx         # Top action bar component\n\u251c\u2500\u2500 BottomActionBar.tsx      # Bottom action bar component\n\u251c\u2500\u2500 ToolbarIconButton.tsx    # Shared icon button component\n\u251c\u2500\u2500 FloatingToolbarShell.tsx # Wrapper for floating toolbar styling\n\u2514\u2500\u2500 VirtualShiftButton.tsx   # Mobile virtual Shift key (separate)\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"usage-example",children:"Usage Example"}),"\n",(0,o.jsx)(n.p,{children:"Action bars are rendered in the main App component:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",children:"import { TopActionBar } from './ui/TopActionBar';\nimport { BottomActionBar } from './ui/BottomActionBar';\n\nfunction App() {\n  const [sidebarWidth, setSidebarWidth] = useState(0);\n  const activePlugin = useCanvasStore(state => state.activePlugin);\n  const setMode = useCanvasStore(state => state.setMode);\n\n  return (\n    <div>\n      <Canvas />\n      <Sidebar onWidthChange={setSidebarWidth} />\n      \n      <TopActionBar\n        activeMode={activePlugin}\n        onModeChange={setMode}\n        sidebarWidth={sidebarWidth}\n        isSidebarPinned={isSidebarPinned}\n        isSidebarOpen={isSidebarOpen}\n        onMenuClick={handleMenuClick}\n        selectedPaths={selectedPaths}\n        showGridRulers={grid?.enabled && grid?.showRulers}\n      />\n      \n      <BottomActionBar sidebarWidth={sidebarWidth} />\n    </div>\n  );\n}\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"/ttpe/docs/app-structure/canvas",children:"Canvas"})," - Main canvas component"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"/ttpe/docs/app-structure/sidebar",children:"Sidebar"})," - Sidebar panels and navigation"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"/ttpe/docs/ui/components",children:"UI Components"})," - ToolbarIconButton and other components"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"/ttpe/docs/plugins/overview",children:"Plugin System"})," - Mode/plugin registration"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"/ttpe/docs/features/undo-redo",children:"Undo/Redo"})," - History management"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.a,{href:"/ttpe/docs/features/transforms",children:"Viewport Operations"})," - Pan and zoom"]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,o.jsx)(n.h3,{id:"for-ui-developers",children:"For UI Developers"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Use ToolbarIconButton"}),": Consistent button component for action bars"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Add keyboard shortcuts"}),": All actions should have keyboard equivalents"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Show counter badges"}),": Visual feedback for selection/history counts"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Disable when unavailable"}),": Gray out buttons that can't be used"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Provide clear tooltips"}),": Include keyboard shortcuts in tooltips"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"for-plugin-developers",children:"For Plugin Developers"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Register mode icon"}),": Provide icon and label for Top Action Bar"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Handle mode activation"}),": Implement activate/deactivate lifecycle"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Update action availability"}),": Enable/disable actions based on selection"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Respect active mode"}),": Only handle events when mode is active"]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"future-enhancements",children:"Future Enhancements"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Customizable toolbars"}),": Allow users to show/hide buttons"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Plugin actions"}),": Allow plugins to add custom buttons"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Toolbar presets"}),": Different layouts for different workflows"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Touch gestures"}),": Swipe gestures to toggle toolbars on mobile"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Floating position"}),": Drag to reposition toolbars"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Collapsible toolbars"}),": Auto-hide when not in use"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>l});var i=s(6540);const o={},t=i.createContext(o);function r(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);